parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"yrjL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUniqueId=exports.mergeTransactions=exports.AddressLiteral=exports.Address=void 0;class e{constructor(e){this._address=e}toString(){return this._address}equals(s){return s instanceof e?this._address==s._address:this._address==s}}exports.Address=e;class s extends e{constructor(e){super(e)}}function r(e,s,r){if("old"==r.batchType)return e.push(...s),e;if(0===e.length)return e.push(...s),e;let t=0;for(;t<e.length&&e[t].id.lt.localeCompare(r.maxLt)>=0;)++t;return e.splice(t,0,...s),e}exports.AddressLiteral=s,exports.mergeTransactions=r;const t=4294967295;let o=Math.floor(Math.random()*t);function d(){return o=(o+1)%t}exports.getUniqueId=d;
},{}],"S51G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseTokensObject=exports.serializeTokensObject=exports.parseAccountInteraction=exports.parsePermissions=exports.parseMessage=exports.serializeMessage=exports.parseTransaction=exports.serializeTransaction=void 0;const e=require("./utils");function s(e){return{...e,inMessage:n(e.inMessage),outMessages:e.outMessages.map(n)}}function t(e){return{...e,inMessage:r(e.inMessage),outMessages:e.outMessages.map(r)}}function n(e){return{...e,src:e.src?e.src.toString():void 0,dst:e.dst?e.dst.toString():void 0}}function r(s){return{...s,src:s.src?new e.Address(s.src):void 0,dst:s.dst?new e.Address(s.dst):void 0}}function o(e){return{...e,accountInteraction:e.accountInteraction?i(e.accountInteraction):void 0}}function i(s){return{...s,address:new e.Address(s.address)}}function c(e){return a(e)}function a(s){if(s instanceof e.Address)return s.toString();if(Array.isArray(s)){const e=[];for(const t of s)e.push(a(t));return e}if(null!=s&&"object"==typeof s){const e={};for(const[t,n]of Object.entries(s))e[t]=a(n);return e}return s}function p(e,s){const t={};for(const n of e)t[n.name]=u(n,s[n.name]);return t}function u(s,t){if(s.type.startsWith("map")){let[e,n]=s.type.split(",");e=e.slice(4),n=n.slice(0,-1);const r=[];for(const[o,i]of t)r.push([u({name:"",type:e},o),u({name:"",type:n,components:s.components},i)]);return r}{const n=s.type.endsWith("[]"),r=!n&&s.type.startsWith("optional"),o=n?s.type.slice(0,-2):r?s.type.slice(9,-1):s.type;if(n){const e={name:s.name,type:o,components:s.components},n=[];for(const s of t)n.push(u(e,s));return n}if(r){if(null==t)return null;return u({name:s.name,type:o,components:s.components},t)}if("tuple"==o){const e={};if(null!=s.components)for(const n of s.components)e[n.name]=u(n,t[n.name]);return e}return"address"==o?new e.Address(t):t}}exports.serializeTransaction=s,exports.parseTransaction=t,exports.serializeMessage=n,exports.parseMessage=r,exports.parsePermissions=o,exports.parseAccountInteraction=i,exports.serializeTokensObject=c,exports.parseTokensObject=p;
},{"./utils":"yrjL"}],"qeQ0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Subscriber=void 0;const t=require("./utils");class s{constructor(t){this.provider=t,this.subscriptions={},this.scanners={}}transactions(t){return this._addSubscription("transactionsFound",t)}oldTransactions(s,r){const o=(0,t.getUniqueId)();return new n(async(t,e)=>{const n=new i(this.provider,{address:s,onData:t,onEnd:e,...r});this.scanners[o]=n,await n.start()},async()=>{const t=this.scanners[o];delete this.scanners[o],null!=t&&await t.stop()},e)}states(t){return this._addSubscription("contractStateChanged",t)}async unsubscribe(){const t=Object.assign({},this.subscriptions);for(const e of Object.keys(this.subscriptions))delete this.subscriptions[e];const s=Object.assign({},this.scanners);for(const e of Object.keys(this.scanners))delete this.scanners[e];await Promise.all(Object.values(t).map(async t=>{const s=Object.assign({},t);for(const e of Object.keys(s))delete t[e];await Promise.all(Object.values(s).map(t=>{if(null!=t)return t.subscription.then(t=>t.unsubscribe()).catch(()=>{})}))}).concat(Object.values(s).map(t=>t.stop())))}_addSubscription(s,i){const o=(0,t.getUniqueId)();return new n((t,e)=>{let n=this.subscriptions[i.toString()],a=null==n?void 0:n[s];if(null==a){const c={[o]:{onData:t,onEnd:e,queue:new r}};a={subscription:this.provider.subscribe(s,{address:i}).then(t=>(t.on("data",t=>{Object.values(c).forEach(({onData:s,queue:e})=>{e.enqueue(()=>s(t))})}),t.on("unsubscribed",()=>{Object.values(c).forEach(({onEnd:t,queue:s})=>{delete c[o],s.clear(),s.enqueue(async()=>t())})}),t)).catch(t=>{throw console.error(t),Object.values(c).forEach(({onEnd:t,queue:s})=>{delete c[o],s.clear(),s.enqueue(()=>t())}),t}),handlers:c},null==n?(n={[s]:a},this.subscriptions[i.toString()]=n):n[s]=a}else a.handlers[o]={onData:t,onEnd:e,queue:new r}},()=>{const t=this.subscriptions[i.toString()];if(null==t)return;const e=t[s];if(null!=e&&(delete e.handlers[o],0===Object.keys(e.handlers).length)){const n=e.subscription;delete t[s],n.then(t=>t.unsubscribe()).catch(console.debug)}0===Object.keys(t).length&&delete this.subscriptions[i.toString()]},e)}}async function e(t,s){await s(t)}exports.Subscriber=s;class n{constructor(t,s,e){this.makeProducer=t,this.stopProducer=s,this.extractor=e}first(){return new Promise(async(t,s)=>{this.makeProducer(async s=>{await this.extractor(s,s=>{this.stopProducer(),t(s)})},()=>s(new Error("Subscription closed")))})}on(t){this.makeProducer(async s=>{await this.extractor(s,t)},()=>{})}merge(t){return new n(async(s,e)=>{const n={counter:0},i=()=>{2==++n.counter&&e()};this.makeProducer(s,i),t.makeProducer(s,i)},()=>{this.stopProducer(),t.stopProducer()},this.extractor)}filter(t){return new n(this.makeProducer,this.stopProducer,(s,e)=>this.extractor(s,async s=>{await t(s)&&await e(s)}))}filterMap(t){return new n(this.makeProducer,this.stopProducer,(s,e)=>this.extractor(s,async s=>{const n=await t(s);void 0!==n&&await e(n)}))}map(t){return this.filterMap(t)}flatMap(t){return new n(this.makeProducer,this.stopProducer,(s,e)=>this.extractor(s,async s=>{const n=await t(s);for(const t of n)await e(t)}))}skip(t){const s={index:0};return new n(this.makeProducer,this.stopProducer,(e,n)=>this.extractor(e,async e=>{s.index>=t?await n(e):++s.index}))}skipWhile(t){const s={shouldSkip:!0};return new n(this.makeProducer,this.stopProducer,(e,n)=>this.extractor(e,async e=>{s.shouldSkip&&await t(e)||(s.shouldSkip=!1,await n(e))}))}}class i{constructor(t,{address:s,onData:e,onEnd:n,fromLt:i,fromUtime:o}){this.provider=t,this.queue=new r,this.isRunning=!1,this.address=s,this.onData=e,this.onEnd=n,this.fromLt=i,this.fromUtime=o}async start(){this.isRunning||null!=this.promise||(this.isRunning=!0,this.promise=(async()=>{for(;this.isRunning;)try{const{transactions:s,continuation:e}=await this.provider.getTransactions({address:this.address,continuation:this.continuation});if(!this.isRunning||null==s.length)break;const n=s.filter(t=>(null==this.fromLt||t.id.lt>this.fromLt)&&(null==this.fromUtime||t.createdAt>this.fromUtime));if(0==n.length)break;const i={maxLt:n[0].id.lt,minLt:n[n.length-1].id.lt,batchType:"old"};if(this.queue.enqueue(()=>this.onData({address:this.address,transactions:n,info:i})),null==e)break;this.continuation=e}catch(t){console.error(t)}this.queue.enqueue(async()=>this.onEnd()),this.isRunning=!1,this.continuation=void 0})())}async stop(){this.isRunning=!1,this.queue.clear(),null!=this.promise?await this.promise:this.onEnd()}}class r{constructor(){this.queue=[],this.workingOnPromise=!1}enqueue(t){this.queue.push(t),this._dequeue().catch(()=>{})}clear(){this.queue.length=0}async _dequeue(){if(this.workingOnPromise)return;const t=this.queue.shift();t&&(this.workingOnPromise=!0,t().then(()=>{this.workingOnPromise=!1,this._dequeue()}).catch(()=>{this.workingOnPromise=!1,this._dequeue()}))}}
},{"./utils":"yrjL"}],"Xnvh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TvmException=exports.Contract=void 0;const t=require("./models");class s{constructor(s,i,n){if(!Array.isArray(i.functions))throw new Error("Invalid abi. Functions array required");if(!Array.isArray(i.events))throw new Error("Invalid abi. Events array required");this._provider=s,this._abi=JSON.stringify(i),this._functions=i.functions.reduce((t,s)=>(t[s.name]={inputs:s.inputs||[],outputs:s.outputs||[]},t),{}),this._events=i.events.reduce((t,s)=>(t[s.name]={inputs:s.inputs||[]},t),{}),this._address=n;class a{constructor(s,e,i,n,a,r){this.provider=s,this.functionAbi=e,this.abi=i,this.address=n,this.method=a,this.params=(0,t.serializeTokensObject)(r)}async send(s){const{transaction:e}=await this.provider.rawApi.sendMessage({sender:s.from.toString(),recipient:this.address.toString(),amount:s.amount,bounce:null==s.bounce||s.bounce,payload:{abi:this.abi,method:this.method,params:this.params}});return(0,t.parseTransaction)(e)}async sendWithResult(s){const e=this.provider.createSubscriber();try{let n,a;const r=new Promise(t=>{a=(s=>t(s))}),o=[];e.transactions(this.address).flatMap(t=>t.transactions).filter(t=>{var e;return(null===(e=t.inMessage.src)||void 0===e?void 0:e.equals(s.from))||!1}).on(t=>{null==n?o.push(t):n.possibleMessages.findIndex(s=>s.hash==t.inMessage.hash)>=0&&(null==a||a(t))});const u=await this.send(s),c=u.outMessages.filter(t=>{var s;return(null===(s=t.dst)||void 0===s?void 0:s.equals(this.address))||!1});n={transaction:u,possibleMessages:c};const d=o.find(t=>c.findIndex(s=>s.hash==t.inMessage.hash)>=0);null!=d&&(null==a||a(d));const h=await r;let p=void 0;try{const s=await this.provider.rawApi.decodeTransaction({transaction:(0,t.serializeTransaction)(h),abi:this.abi,method:this.method});null!=s&&(p=null!=this.functionAbi.outputs?(0,t.parseTokensObject)(this.functionAbi.outputs,s.output):{})}catch(i){console.error(i)}return{parentTransaction:n.transaction,childTransaction:h,output:p}}finally{await e.unsubscribe()}}async estimateFees(t){const{fees:s}=await this.provider.rawApi.estimateFees({sender:t.from.toString(),recipient:this.address.toString(),amount:t.amount,payload:{abi:this.abi,method:this.method,params:this.params}});return s}async sendExternal(s){let e=!0===s.withoutSignature?this.provider.rawApi.sendUnsignedExternalMessage:this.provider.rawApi.sendExternalMessage,{transaction:i,output:n}=await e({publicKey:s.publicKey,recipient:this.address.toString(),stateInit:s.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},local:s.local});return{transaction:(0,t.parseTransaction)(i),output:null!=n?(0,t.parseTokensObject)(this.functionAbi.outputs,n):void 0}}async call(s={}){let{output:i,code:n}=await this.provider.rawApi.runLocal({address:this.address.toString(),cachedState:s.cachedState,responsible:s.responsible,functionCall:{abi:this.abi,method:this.method,params:this.params}});if(null==i||0!=n)throw new e(n);return(0,t.parseTokensObject)(this.functionAbi.outputs,i)}}this._methods=new Proxy({},{get:(t,s)=>{const e=this._functions[s];return t=>new a(this._provider,e,this._abi,this._address,s,t)}})}get methods(){return this._methods}get address(){return this._address}get abi(){return this._abi}async decodeTransaction(s){try{const i=await this._provider.rawApi.decodeTransaction({transaction:(0,t.serializeTransaction)(s.transaction),abi:this._abi,method:s.methods});if(null==i)return;let{method:n,input:a,output:r}=i;const o=this._functions[n];return{method:n,input:null!=o.inputs?(0,t.parseTokensObject)(o.inputs,a):{},output:null!=o.outputs?(0,t.parseTokensObject)(o.outputs,r):{}}}catch(e){return}}async decodeTransactionEvents(s){try{const{events:i}=await this._provider.rawApi.decodeTransactionEvents({transaction:(0,t.serializeTransaction)(s.transaction),abi:this._abi}),n=[];for(const{event:s,data:e}of i){const i=this._events[s];n.push({event:s,data:null!=i.inputs?(0,t.parseTokensObject)(i.inputs,e):{}})}return n}catch(e){return[]}}async decodeInputMessage(s){try{const i=await this._provider.rawApi.decodeInput({abi:this._abi,body:s.body,internal:s.internal,method:s.methods});if(null==i)return;let{method:n,input:a}=i;const r=this._functions[n];return{method:n,input:null!=r.inputs?(0,t.parseTokensObject)(r.inputs,a):{}}}catch(e){return}}async decodeOutputMessage(s){try{const i=await this._provider.rawApi.decodeOutput({abi:this._abi,body:s.body,method:s.methods});if(null==i)return;let{method:n,output:a}=i;const r=this._functions[n];return{method:n,output:null!=r.outputs?(0,t.parseTokensObject)(r.outputs,a):{}}}catch(e){return}}}exports.Contract=s;class e extends Error{constructor(t){super(`TvmException: ${t}`),this.code=t}}exports.TvmException=e;
},{"./models":"S51G"}],"mEq5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],"RebX":[function(require,module,exports) {
"use strict";var t=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),e=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var r={};if(null!=s)for(var i in s)"default"!==i&&Object.prototype.hasOwnProperty.call(s,i)&&t(r,s,i);return e(r,s),r},r=this&&this.__exportStar||function(e,s){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(s,r)||t(s,e,r)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProviderNotInitializedException=exports.ProviderNotFoundException=exports.ProviderRpcClient=exports.hasEverscaleProvider=exports.mergeTransactions=exports.AddressLiteral=exports.Address=exports.Subscriber=void 0;const i=require("./models"),n=require("./utils"),a=s(require("./stream")),o=s(require("./contract"));r(require("./api"),exports),r(require("./models"),exports),r(require("./contract"),exports);var c=require("./stream");Object.defineProperty(exports,"Subscriber",{enumerable:!0,get:function(){return c.Subscriber}});var d=require("./utils");let u;async function p(){return await u,!0===window.__hasEverscaleProvider||!0===window.hasTonProvider}Object.defineProperty(exports,"Address",{enumerable:!0,get:function(){return d.Address}}),Object.defineProperty(exports,"AddressLiteral",{enumerable:!0,get:function(){return d.AddressLiteral}}),Object.defineProperty(exports,"mergeTransactions",{enumerable:!0,get:function(){return d.mergeTransactions}}),u="complete"==document.readyState?Promise.resolve():new Promise(t=>{window.addEventListener("load",()=>{t()})}),exports.hasEverscaleProvider=p;class l{constructor(t={}){this._subscriptions={},this._contractSubscriptions={};const e=this;this.Contract=class extends o.Contract{constructor(t,s){super(e,t,s)}};this.Subscriber=class extends a.Subscriber{constructor(){super(e)}},this._properties=t,this._api=new Proxy({},{get:(t,e)=>t=>{if(null!=this._provider)return this._provider.request({method:e,params:t});throw new b}}),this._provider=window.__ever||window.ton,null!=this._provider?this._mainInitializationPromise=Promise.resolve():this._mainInitializationPromise=p().then(t=>new Promise((e,s)=>{if(t)if(this._provider=window.__ever||window.ton,null!=this._provider)e();else{const t=!0===window.__hasEverscaleProvider?"ever#initialized":"ton#initialized";window.addEventListener(t,t=>{this._provider=window.__ever||window.ton,e()})}else s(new h)})),this._mainInitializationPromise.then(()=>{null!=this._provider&&this._registerEventHandlers(this._provider)})}async hasProvider(){return p()}async ensureInitialized(){try{await this._mainInitializationPromise}catch(t){if(null==this._properties.fallback)throw t;null==this._additionalInitializationPromise&&(this._additionalInitializationPromise=this._properties.fallback().then(async t=>{this._provider=t,this._registerEventHandlers(this._provider)})),await this._additionalInitializationPromise}}get isInitialized(){return null!=this._provider}get raw(){if(null!=this._provider)return this._provider;throw new b}get rawApi(){return this._api}createContract(t,e){return new this.Contract(t,e)}createSubscriber(){return new this.Subscriber}async requestPermissions(t){const e=await this._api.requestPermissions({permissions:t.permissions});return(0,i.parsePermissions)(e)}async changeAccount(){await this._api.changeAccount()}async disconnect(){await this._api.disconnect()}async subscribe(t,e){class s{constructor(t,e){this._subscribe=t,this._unsubscribe=e,this._listeners={data:[],subscribed:[],unsubscribed:[]}}on(t,e){return this._listeners[t].push(e),this}async subscribe(){await this._subscribe(this);for(const t of this._listeners.subscribed)t()}async unsubscribe(){await this._unsubscribe();for(const t of this._listeners.unsubscribed)t()}notify(t){for(const e of this._listeners.data)e(t)}}let r=this._getEventSubscriptions(t);const i=(0,n.getUniqueId)();switch(t){case"connected":case"disconnected":case"networkChanged":case"permissionsChanged":case"loggedOut":{const t=new s(async t=>{null==r[i]&&(r[i]=(e=>{t.notify(e)}))},async()=>{delete r[i]});return await t.subscribe(),t}case"transactionsFound":case"contractStateChanged":{const n=e.address.toString(),a=new s(async e=>{if(null!=r[i])return;r[i]=(t=>{t.address.toString()==n&&e.notify(t)});let s=this._contractSubscriptions[n];null==s&&(s={},this._contractSubscriptions[n]=s),s[i]={state:"contractStateChanged"==t,transactions:"transactionsFound"==t};const{total:a,withoutExcluded:o}=w(Object.values(s),s[i]);try{a.transactions==o.transactions&&a.state==o.state||await this.rawApi.subscribe({address:n,subscriptions:a})}catch(c){throw delete r[i],delete s[i],c}},async()=>{delete r[i];const t=this._contractSubscriptions[n];if(null==t)return;const e=t[i],{total:s,withoutExcluded:a}=w(Object.values(t),e);delete t[i],a.transactions||a.state?s.transactions==a.transactions&&s.state==a.state||await this.rawApi.subscribe({address:n,subscriptions:a}):await this.rawApi.unsubscribe({address:n})});return await a.subscribe(),a}default:throw new Error(`Unknown event ${t}`)}}async getProviderState(){const t=await this._api.getProviderState();return{...t,permissions:(0,i.parsePermissions)(t.permissions)}}async getFullContractState(t){return await this._api.getFullContractState({address:t.address.toString()})}async getAccountsByCodeHash(t){const{accounts:e,continuation:s}=await this._api.getAccountsByCodeHash({...t});return{accounts:e.map(t=>new n.Address(t)),continuation:s}}async getTransactions(t){const{transactions:e,continuation:s,info:r}=await this._api.getTransactions({...t,address:t.address.toString()});return{transactions:e.map(i.parseTransaction),continuation:s,info:r}}async getTransaction(t){const{transaction:e}=await this._api.getTransaction({...t});return{transaction:e?(0,i.parseTransaction)(e):void 0}}async getExpectedAddress(t,e){const{address:s}=await this._api.getExpectedAddress({abi:JSON.stringify(t),...e,initParams:(0,i.serializeTokensObject)(e.initParams)});return new n.Address(s)}async getBocHash(t){return await this._api.getBocHash({boc:t}).then(({hash:t})=>t)}async packIntoCell(t){return await this._api.packIntoCell({structure:t.structure,data:(0,i.serializeTokensObject)(t.data)})}async unpackFromCell(t){const{data:e}=await this._api.unpackFromCell({...t,structure:t.structure});return{data:(0,i.parseTokensObject)(t.structure,e)}}async extractPublicKey(t){const{publicKey:e}=await this._api.extractPublicKey({boc:t});return e}async codeToTvc(t){const{tvc:e}=await this._api.codeToTvc({code:t});return e}async splitTvc(t){return await this._api.splitTvc({tvc:t})}async addAsset(t){let e;switch(t.type){case"tip3_token":e={rootContract:t.params.rootContract.toString()};break;default:throw new Error("Unknown asset type")}return await this._api.addAsset({account:t.account.toString(),type:t.type,params:e})}async verifySignature(t){return await this._api.verifySignature(t)}async signData(t){return await this._api.signData(t)}async signDataRaw(t){return await this._api.signDataRaw(t)}async encryptData(t){const{encryptedData:e}=await this._api.encryptData(t);return e}async decryptData(t){const{data:e}=await this._api.decryptData({encryptedData:t});return e}async sendMessage(t){const{transaction:e}=await this._api.sendMessage({...t,sender:t.sender.toString(),recipient:t.recipient.toString(),payload:t.payload?{abi:t.payload.abi,method:t.payload.method,params:(0,i.serializeTokensObject)(t.payload.params)}:void 0});return{transaction:(0,i.parseTransaction)(e)}}_registerEventHandlers(t){const e={connected:t=>t,disconnected:t=>t,transactionsFound:t=>({address:new n.Address(t.address),transactions:t.transactions.map(i.parseTransaction),info:t.info}),contractStateChanged:t=>({address:new n.Address(t.address),state:t.state}),networkChanged:t=>t,permissionsChanged:t=>({permissions:(0,i.parsePermissions)(t.permissions)}),loggedOut:t=>t};for(const[s,r]of Object.entries(e))t.addListener(s,t=>{const e=this._subscriptions[s];if(null==e)return;const i=r(t);for(const s of Object.values(e))s(i)})}_getEventSubscriptions(t){let e=this._subscriptions[t];return null==e&&(e={},this._subscriptions[t]=e),e}}exports.ProviderRpcClient=l;class h extends Error{constructor(){super("Everscale provider was not found")}}exports.ProviderNotFoundException=h;class b extends Error{constructor(){super("Everscale provider was not initialized yet")}}function w(t,e){const s={state:!1,transactions:!1},r=Object.assign({},s);for(const i of t){if(r.transactions&&r.state)break;s.state||(s.state=i.state),s.transactions||(s.transactions=i.transactions),i!=e&&(r.state||(r.state=i.state),r.transactions||(r.transactions=i.transactions))}return{total:s,withoutExcluded:r}}exports.ProviderNotInitializedException=b;
},{"./models":"S51G","./utils":"yrjL","./stream":"qeQ0","./contract":"Xnvh","./api":"mEq5"}],"YH9q":[function(require,module,exports) {
"use strict";let n;Object.defineProperty(exports,"__esModule",{value:!0}),exports.GqlTransport=exports.GqlQuery=exports.GenericContract=exports.ClockWithOffset=void 0,exports.checkAddress=x,exports.codeToTvc=S,exports.createExternalMessageWithoutSignature=$,exports.decodeEvent=B,exports.decodeInput=I,exports.decodeOutput=R,exports.decodeTransaction=W,exports.decodeTransactionEvents=L,exports.default=void 0,exports.encodeInternalInput=F,exports.extractPublicKey=E,exports.getBocHash=O,exports.getExpectedAddress=q,exports.packIntoCell=C,exports.runLocal=A,exports.splitTvc=j,exports.unpackFromCell=M,exports.verifySignature=G;let t=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});t.decode();let _=null;function e(){return null!==_&&_.buffer===n.memory.buffer||(_=new Uint8Array(n.memory.buffer)),_}function r(n,_){return t.decode(e().subarray(n,n+_))}const o=new Array(32).fill(void 0);o.push(void 0,null,!0,!1);let i=o.length;function a(n){i===o.length&&o.push(o.length+1);const t=i;return i=o[t],o[t]=n,t}function c(n){return o[n]}function s(n){n<36||(o[n]=i,i=n)}function l(n){const t=c(n);return s(n),t}let d=0,g=new TextEncoder("utf-8");const w="function"==typeof g.encodeInto?function(n,t){return g.encodeInto(n,t)}:function(n,t){const _=g.encode(n);return t.set(_),{read:n.length,written:_.length}};function b(n,t,_){if(void 0===_){const _=g.encode(n),r=t(_.length);return e().subarray(r,r+_.length).set(_),d=_.length,r}let r=n.length,o=t(r);const i=e();let a=0;for(;a<r;a++){const t=n.charCodeAt(a);if(t>127)break;i[o+a]=t}if(a!==r){0!==a&&(n=n.slice(a)),o=_(o,r,r=a+3*n.length);const t=e().subarray(o+a,o+r);a+=w(n,t).written}return d=a,o}function u(n){return null==n}let f=null;function p(){return null!==f&&f.buffer===n.memory.buffer||(f=new Int32Array(n.memory.buffer)),f}let y=null;function h(){return null!==y&&y.buffer===n.memory.buffer||(y=new Float64Array(n.memory.buffer)),y}function m(n){const t=typeof n;if("number"==t||"boolean"==t||null==n)return`${n}`;if("string"==t)return`"${n}"`;if("symbol"==t){const t=n.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=n.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(n)){const t=n.length;let _="[";t>0&&(_+=m(n[0]));for(let e=1;e<t;e++)_+=", "+m(n[e]);return _+="]"}const _=/\[object ([^\]]+)\]/.exec(toString.call(n));let e;if(!(_.length>1))return toString.call(n);if("Object"==(e=_[1]))try{return"Object("+JSON.stringify(n)+")"}catch(r){return"Object"}return n instanceof Error?`${n.name}: ${n.message}\n${n.stack}`:e}function v(t,_,e,r){const o={a:t,b:_,cnt:1,dtor:e},i=(...t)=>{o.cnt++;const _=o.a;o.a=0;try{return r(_,o.b,...t)}finally{0==--o.cnt?n.__wbindgen_export_2.get(o.dtor)(_,o.b):o.a=_}};return i.original=o,i}function k(t,_,e){n._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__hbb120239a7c4e272(t,_,a(e))}function x(t){var _=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),e=d;return 0!==n.checkAddress(_,e)}function T(n,t){if(!(n instanceof t))throw new Error(`expected instance of ${t.name}`);return n.ptr}function A(t,_,e,r,o,i){try{const m=n.__wbindgen_add_to_stack_pointer(-16);T(t,U);var c=b(_,n.__wbindgen_malloc,n.__wbindgen_realloc),s=d,g=b(e,n.__wbindgen_malloc,n.__wbindgen_realloc),w=d,u=b(r,n.__wbindgen_malloc,n.__wbindgen_realloc),f=d;n.runLocal(m,t.ptr,c,s,g,w,u,f,a(o),i);var y=p()[m/4+0],h=p()[m/4+1];if(p()[m/4+2])throw l(h);return l(y)}finally{n.__wbindgen_add_to_stack_pointer(16)}}function q(t,_,e,o,i){try{const A=n.__wbindgen_add_to_stack_pointer(-16);var c=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),s=d,g=b(_,n.__wbindgen_malloc,n.__wbindgen_realloc),w=d,f=u(o)?0:b(o,n.__wbindgen_malloc,n.__wbindgen_realloc),y=d;n.getExpectedAddress(A,c,s,g,w,e,f,y,a(i));var h=p()[A/4+0],m=p()[A/4+1],v=p()[A/4+2],k=p()[A/4+3],x=h,T=m;if(k)throw x=0,T=0,l(v);return r(x,T)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(x,T)}}function O(t){try{const w=n.__wbindgen_add_to_stack_pointer(-16);var _=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),e=d;n.getBocHash(w,_,e);var o=p()[w/4+0],i=p()[w/4+1],a=p()[w/4+2],c=p()[w/4+3],s=o,g=i;if(c)throw s=0,g=0,l(a);return r(s,g)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(s,g)}}function C(t,_){try{const g=n.__wbindgen_add_to_stack_pointer(-16);n.packIntoCell(g,a(t),a(_));var e=p()[g/4+0],o=p()[g/4+1],i=p()[g/4+2],c=p()[g/4+3],s=e,d=o;if(c)throw s=0,d=0,l(i);return r(s,d)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(s,d)}}function M(t,_,e){try{const s=n.__wbindgen_add_to_stack_pointer(-16);var r=b(_,n.__wbindgen_malloc,n.__wbindgen_realloc),o=d;n.unpackFromCell(s,a(t),r,o,e);var i=p()[s/4+0],c=p()[s/4+1];if(p()[s/4+2])throw l(c);return l(i)}finally{n.__wbindgen_add_to_stack_pointer(16)}}function E(t){try{const w=n.__wbindgen_add_to_stack_pointer(-16);var _=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),e=d;n.extractPublicKey(w,_,e);var o=p()[w/4+0],i=p()[w/4+1],a=p()[w/4+2],c=p()[w/4+3],s=o,g=i;if(c)throw s=0,g=0,l(a);return r(s,g)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(s,g)}}function S(t){try{const w=n.__wbindgen_add_to_stack_pointer(-16);var _=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),e=d;n.codeToTvc(w,_,e);var o=p()[w/4+0],i=p()[w/4+1],a=p()[w/4+2],c=p()[w/4+3],s=o,g=i;if(c)throw s=0,g=0,l(a);return r(s,g)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(s,g)}}function j(t){try{const i=n.__wbindgen_add_to_stack_pointer(-16);var _=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),e=d;n.splitTvc(i,_,e);var r=p()[i/4+0],o=p()[i/4+1];if(p()[i/4+2])throw l(o);return l(r)}finally{n.__wbindgen_add_to_stack_pointer(16)}}function F(t,_,e){try{const m=n.__wbindgen_add_to_stack_pointer(-16);var o=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),i=d,c=b(_,n.__wbindgen_malloc,n.__wbindgen_realloc),s=d;n.encodeInternalInput(m,o,i,c,s,a(e));var g=p()[m/4+0],w=p()[m/4+1],u=p()[m/4+2],f=p()[m/4+3],y=g,h=w;if(f)throw y=0,h=0,l(u);return r(y,h)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(y,h)}}function I(t,_,e,r){try{const u=n.__wbindgen_add_to_stack_pointer(-16);var o=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),i=d,c=b(_,n.__wbindgen_malloc,n.__wbindgen_realloc),s=d;n.decodeInput(u,o,i,c,s,a(e),r);var g=p()[u/4+0],w=p()[u/4+1];if(p()[u/4+2])throw l(w);return l(g)}finally{n.__wbindgen_add_to_stack_pointer(16)}}function B(t,_,e){try{const w=n.__wbindgen_add_to_stack_pointer(-16);var r=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),o=d,i=b(_,n.__wbindgen_malloc,n.__wbindgen_realloc),c=d;n.decodeEvent(w,r,o,i,c,a(e));var s=p()[w/4+0],g=p()[w/4+1];if(p()[w/4+2])throw l(g);return l(s)}finally{n.__wbindgen_add_to_stack_pointer(16)}}function R(t,_,e){try{const w=n.__wbindgen_add_to_stack_pointer(-16);var r=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),o=d,i=b(_,n.__wbindgen_malloc,n.__wbindgen_realloc),c=d;n.decodeOutput(w,r,o,i,c,a(e));var s=p()[w/4+0],g=p()[w/4+1];if(p()[w/4+2])throw l(g);return l(s)}finally{n.__wbindgen_add_to_stack_pointer(16)}}function W(t,_,e){try{const s=n.__wbindgen_add_to_stack_pointer(-16);var r=b(_,n.__wbindgen_malloc,n.__wbindgen_realloc),o=d;n.decodeTransaction(s,a(t),r,o,a(e));var i=p()[s/4+0],c=p()[s/4+1];if(p()[s/4+2])throw l(c);return l(i)}finally{n.__wbindgen_add_to_stack_pointer(16)}}function L(t,_){try{const c=n.__wbindgen_add_to_stack_pointer(-16);var e=b(_,n.__wbindgen_malloc,n.__wbindgen_realloc),r=d;n.decodeTransactionEvents(c,a(t),e,r);var o=p()[c/4+0],i=p()[c/4+1];if(p()[c/4+2])throw l(i);return l(o)}finally{n.__wbindgen_add_to_stack_pointer(16)}}function G(t,_,e){try{const u=n.__wbindgen_add_to_stack_pointer(-16);var r=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),o=d,i=b(_,n.__wbindgen_malloc,n.__wbindgen_realloc),a=d,c=b(e,n.__wbindgen_malloc,n.__wbindgen_realloc),s=d;n.verifySignature(u,r,o,i,a,c,s);var g=p()[u/4+0],w=p()[u/4+1];if(p()[u/4+2])throw l(w);return 0!==g}finally{n.__wbindgen_add_to_stack_pointer(16)}}function $(t,_,e,r,o,i){try{const x=n.__wbindgen_add_to_stack_pointer(-16);var c=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),s=d,g=b(_,n.__wbindgen_malloc,n.__wbindgen_realloc),w=d,f=b(e,n.__wbindgen_malloc,n.__wbindgen_realloc),y=d,h=u(r)?0:b(r,n.__wbindgen_malloc,n.__wbindgen_realloc),m=d;n.createExternalMessageWithoutSignature(x,c,s,g,w,f,y,h,m,a(o),i);var v=p()[x/4+0],k=p()[x/4+1];if(p()[x/4+2])throw l(k);return l(v)}finally{n.__wbindgen_add_to_stack_pointer(16)}}function P(t,_){try{return t.apply(this,_)}catch(e){n.__wbindgen_exn_store(a(e))}}function H(t,_,e,r){n.wasm_bindgen__convert__closures__invoke2_mut__h7bcd9da4440792bc(t,_,a(e),a(r))}class U{static __wrap(n){const t=Object.create(U.prototype);return t.ptr=n,t}__destroy_into_raw(){const n=this.ptr;return this.ptr=0,n}free(){const t=this.__destroy_into_raw();n.__wbg_clockwithoffset_free(t)}constructor(){var t=n.clockwithoffset_new();return U.__wrap(t)}updateOffset(t){n.clockwithoffset_updateOffset(this.ptr,t)}offsetMs(){return n.clockwithoffset_offsetMs(this.ptr)}}exports.ClockWithOffset=U;class N{static __wrap(n){const t=Object.create(N.prototype);return t.ptr=n,t}__destroy_into_raw(){const n=this.ptr;return this.ptr=0,n}free(){const t=this.__destroy_into_raw();n.__wbg_genericcontract_free(t)}get address(){try{const e=n.__wbindgen_add_to_stack_pointer(-16);n.genericcontract_address(e,this.ptr);var t=p()[e/4+0],_=p()[e/4+1];return r(t,_)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(t,_)}}sendMessageLocally(t){try{const r=n.__wbindgen_add_to_stack_pointer(-16);n.genericcontract_sendMessageLocally(r,this.ptr,a(t));var _=p()[r/4+0],e=p()[r/4+1];if(p()[r/4+2])throw l(e);return l(_)}finally{n.__wbindgen_add_to_stack_pointer(16)}}sendMessage(t){try{const r=n.__wbindgen_add_to_stack_pointer(-16);n.genericcontract_sendMessage(r,this.ptr,a(t));var _=p()[r/4+0],e=p()[r/4+1];if(p()[r/4+2])throw l(e);return l(_)}finally{n.__wbindgen_add_to_stack_pointer(16)}}refresh(){return l(n.genericcontract_refresh(this.ptr))}handleBlock(t){var _=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),e=d;return l(n.genericcontract_handleBlock(this.ptr,_,e))}preloadTransactions(t,_){try{const s=n.__wbindgen_add_to_stack_pointer(-16);var e=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),r=d,o=b(_,n.__wbindgen_malloc,n.__wbindgen_realloc),i=d;n.genericcontract_preloadTransactions(s,this.ptr,e,r,o,i);var a=p()[s/4+0],c=p()[s/4+1];if(p()[s/4+2])throw l(c);return l(a)}finally{n.__wbindgen_add_to_stack_pointer(16)}}get pollingMethod(){return l(n.genericcontract_pollingMethod(this.ptr))}}exports.GenericContract=N;class D{static __wrap(n){const t=Object.create(D.prototype);return t.ptr=n,t}__destroy_into_raw(){const n=this.ptr;return this.ptr=0,n}free(){const t=this.__destroy_into_raw();n.__wbg_gqlquery_free(t)}onReceive(t){const _=this.__destroy_into_raw();var e=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),r=d;n.gqlquery_onReceive(_,e,r)}onError(t){const _=this.__destroy_into_raw();n.gqlquery_onError(_,a(t))}onTimeout(){const t=this.__destroy_into_raw();n.gqlquery_onTimeout(t)}}exports.GqlQuery=D;class K{static __wrap(n){const t=Object.create(K.prototype);return t.ptr=n,t}__destroy_into_raw(){const n=this.ptr;return this.ptr=0,n}free(){const t=this.__destroy_into_raw();n.__wbg_gqltransport_free(t)}constructor(t,_){T(t,U);var e=n.gqltransport_new(t.ptr,a(_));return K.__wrap(e)}subscribeToGenericContract(t,_){try{const c=n.__wbindgen_add_to_stack_pointer(-16);var e=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),r=d;n.gqltransport_subscribeToGenericContract(c,this.ptr,e,r,a(_));var o=p()[c/4+0],i=p()[c/4+1];if(p()[c/4+2])throw l(i);return l(o)}finally{n.__wbindgen_add_to_stack_pointer(16)}}getLatestBlock(t){try{const i=n.__wbindgen_add_to_stack_pointer(-16);var _=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),e=d;n.gqltransport_getLatestBlock(i,this.ptr,_,e);var r=p()[i/4+0],o=p()[i/4+1];if(p()[i/4+2])throw l(o);return l(r)}finally{n.__wbindgen_add_to_stack_pointer(16)}}waitForNextBlock(t,_,e){try{const g=n.__wbindgen_add_to_stack_pointer(-16);var r=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),o=d,i=b(_,n.__wbindgen_malloc,n.__wbindgen_realloc),a=d;n.gqltransport_waitForNextBlock(g,this.ptr,r,o,i,a,e);var c=p()[g/4+0],s=p()[g/4+1];if(p()[g/4+2])throw l(s);return l(c)}finally{n.__wbindgen_add_to_stack_pointer(16)}}getFullContractState(t){try{const i=n.__wbindgen_add_to_stack_pointer(-16);var _=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),e=d;n.gqltransport_getFullContractState(i,this.ptr,_,e);var r=p()[i/4+0],o=p()[i/4+1];if(p()[i/4+2])throw l(o);return l(r)}finally{n.__wbindgen_add_to_stack_pointer(16)}}getAccountsByCodeHash(t,_,e){try{const g=n.__wbindgen_add_to_stack_pointer(-16);var r=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),o=d,i=u(e)?0:b(e,n.__wbindgen_malloc,n.__wbindgen_realloc),a=d;n.gqltransport_getAccountsByCodeHash(g,this.ptr,r,o,_,i,a);var c=p()[g/4+0],s=p()[g/4+1];if(p()[g/4+2])throw l(s);return l(c)}finally{n.__wbindgen_add_to_stack_pointer(16)}}getTransactions(t,_,e){try{const s=n.__wbindgen_add_to_stack_pointer(-16);var r=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),o=d;n.gqltransport_getTransactions(s,this.ptr,r,o,u(_)?0:a(_),e);var i=p()[s/4+0],c=p()[s/4+1];if(p()[s/4+2])throw l(c);return l(i)}finally{n.__wbindgen_add_to_stack_pointer(16)}}getTransaction(t){try{const i=n.__wbindgen_add_to_stack_pointer(-16);var _=b(t,n.__wbindgen_malloc,n.__wbindgen_realloc),e=d;n.gqltransport_getTransaction(i,this.ptr,_,e);var r=p()[i/4+0],o=p()[i/4+1];if(p()[i/4+2])throw l(o);return l(r)}finally{n.__wbindgen_add_to_stack_pointer(16)}}}async function Q(n,t){if("function"==typeof Response&&n instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(n,t)}catch(_){if("application/wasm"==n.headers.get("Content-Type"))throw _;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",_)}const e=await n.arrayBuffer();return await WebAssembly.instantiate(e,t)}{const _=await WebAssembly.instantiate(n,t);return _ instanceof WebAssembly.Instance?{instance:_,module:n}:_}}async function J(t){void 0===t&&(t=new URL("nekoton_wasm_bg.wasm",import.meta.url));const _={wbg:{}};_.wbg.__wbg_onMessageSent_c7b95611372f4fdb=function(n,t,_){c(n).onMessageSent(l(t),l(_))},_.wbg.__wbg_onMessageExpired_c8f1d6a41c9d2025=function(n,t){c(n).onMessageExpired(l(t))},_.wbg.__wbg_onStateChanged_16e7cef155510cc3=function(n,t){c(n).onStateChanged(l(t))},_.wbg.__wbg_onTransactionsFound_d410dfda73b53529=function(n,t,_){c(n).onTransactionsFound(l(t),l(_))},_.wbg.__wbindgen_string_new=function(n,t){return a(r(n,t))},_.wbg.__wbindgen_object_drop_ref=function(n){l(n)},_.wbg.__wbindgen_number_new=function(n){return a(n)},_.wbg.__wbindgen_string_get=function(t,_){const e=c(_);var r="string"==typeof e?e:void 0,o=u(r)?0:b(r,n.__wbindgen_malloc,n.__wbindgen_realloc),i=d;p()[t/4+1]=i,p()[t/4+0]=o},_.wbg.__wbindgen_is_string=function(n){return"string"==typeof c(n)},_.wbg.__wbg_genericcontract_new=function(n){return a(N.__wrap(n))},_.wbg.__wbg_send_3a39cf3a085c863d=function(n,t,_,e){c(n).send(r(t,_),D.__wrap(e))},_.wbg.__wbindgen_is_object=function(n){const t=c(n);return"object"==typeof t&&null!==t},_.wbg.__wbindgen_number_get=function(n,t){const _=c(t);var e="number"==typeof _?_:void 0;h()[n/8+1]=u(e)?0:e,p()[n/4+0]=!u(e)},_.wbg.__wbg_isLocal_bff575c915a57596=function(n){return c(n).isLocal()},_.wbg.__wbindgen_boolean_get=function(n){const t=c(n);return"boolean"==typeof t?t?1:0:2},_.wbg.__wbindgen_is_null=function(n){return null===c(n)},_.wbg.__wbindgen_is_undefined=function(n){return void 0===c(n)},_.wbg.__wbindgen_cb_drop=function(n){const t=l(n).original;if(1==t.cnt--)return t.a=0,!0;return!1},_.wbg.__wbg_get_f45dff51f52d7222=function(n,t){return a(c(n)[t>>>0])},_.wbg.__wbg_length_7b60f47bde714631=function(n){return c(n).length},_.wbg.__wbg_new_16f24b0728c5e67b=function(){return a(new Array)},_.wbg.__wbg_get_8bbb82393651dd9c=function(){return P(function(n,t){return a(Reflect.get(c(n),c(t)))},arguments)},_.wbg.__wbg_new_d3138911a89329b0=function(){return a(new Object)},_.wbg.__wbg_isArray_8480ed76e5369634=function(n){return Array.isArray(c(n))},_.wbg.__wbg_push_a72df856079e6930=function(n,t){return c(n).push(c(t))},_.wbg.__wbg_new_55259b13834a484c=function(n,t){return a(new Error(r(n,t)))},_.wbg.__wbg_call_94697a95cb7e239c=function(){return P(function(n,t,_){return a(c(n).call(c(t),c(_)))},arguments)},_.wbg.__wbg_now_e6c39c10a5e8aec7=function(){return Date.now()},_.wbg.__wbg_keys_2d148611a251964d=function(n){return a(Object.keys(c(n)))},_.wbg.__wbg_new_4beacc9c71572250=function(n,t){try{var _={a:n,b:t};return a(new Promise((n,t)=>{const e=_.a;_.a=0;try{return H(e,_.b,n,t)}finally{_.a=e}}))}finally{_.a=_.b=0}},_.wbg.__wbg_resolve_4f8f547f26b30b27=function(n){return a(Promise.resolve(c(n)))},_.wbg.__wbg_then_a6860c82b90816ca=function(n,t){return a(c(n).then(c(t)))},_.wbg.__wbg_set_c42875065132a932=function(){return P(function(n,t,_){return Reflect.set(c(n),c(t),c(_))},arguments)},_.wbg.__wbindgen_debug_string=function(t,_){var e=b(m(c(_)),n.__wbindgen_malloc,n.__wbindgen_realloc),r=d;p()[t/4+1]=r,p()[t/4+0]=e},_.wbg.__wbindgen_throw=function(n,t){throw new Error(r(n,t))},_.wbg.__wbindgen_closure_wrapper1531=function(n,t,_){return a(v(n,t,506,k))},("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:e,module:o}=await Q(await t,_);return n=e.exports,J.__wbindgen_wasm_module=o,n}exports.GqlTransport=K;var z=J;exports.default=z;
},{}],"SQZr":[function(require,module,exports) {
module.exports=o,o.default=o,o.stable=a,o.stableStringify=a;var e="[...]",r="[Circular]",t=[],i=[];function n(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function o(e,r,o,f){var l;void 0===f&&(f=n()),u(e,"",0,[],void 0,0,f);try{l=0===i.length?JSON.stringify(e,r,o):JSON.stringify(e,s(r),o)}catch(c){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==t.length;){var a=t.pop();4===a.length?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return l}function f(e,r,n,o){var f=Object.getOwnPropertyDescriptor(o,n);void 0!==f.get?f.configurable?(Object.defineProperty(o,n,{value:e}),t.push([o,n,r,f])):i.push([r,n,e]):(o[n]=e,t.push([o,n,r]))}function u(t,i,n,o,l,a,c){var s;if(a+=1,"object"==typeof t&&null!==t){for(s=0;s<o.length;s++)if(o[s]===t)return void f(r,t,i,l);if(void 0!==c.depthLimit&&a>c.depthLimit)return void f(e,t,i,l);if(void 0!==c.edgesLimit&&n+1>c.edgesLimit)return void f(e,t,i,l);if(o.push(t),Array.isArray(t))for(s=0;s<t.length;s++)u(t[s],s,s,o,t,a,c);else{var d=Object.keys(t);for(s=0;s<d.length;s++){var v=d[s];u(t[v],v,s,o,t,a,c)}}o.pop()}}function l(e,r){return e<r?-1:e>r?1:0}function a(e,r,o,f){void 0===f&&(f=n());var u,l=c(e,"",0,[],void 0,0,f)||e;try{u=0===i.length?JSON.stringify(l,r,o):JSON.stringify(l,s(r),o)}catch(d){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==t.length;){var a=t.pop();4===a.length?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return u}function c(i,n,o,u,a,s,d){var v;if(s+=1,"object"==typeof i&&null!==i){for(v=0;v<u.length;v++)if(u[v]===i)return void f(r,i,n,a);try{if("function"==typeof i.toJSON)return}catch(y){return}if(void 0!==d.depthLimit&&s>d.depthLimit)return void f(e,i,n,a);if(void 0!==d.edgesLimit&&o+1>d.edgesLimit)return void f(e,i,n,a);if(u.push(i),Array.isArray(i))for(v=0;v<i.length;v++)c(i[v],v,v,u,i,s,d);else{var p={},g=Object.keys(i).sort(l);for(v=0;v<g.length;v++){var h=g[v];c(i[h],h,v,u,i,s,d),p[h]=i[h]}if(void 0===a)return p;t.push([a,n,i]),a[n]=p}u.pop()}}function s(e){return e=void 0!==e?e:function(e,r){return r},function(r,t){if(i.length>0)for(var n=0;n<i.length;n++){var o=i[n];if(o[1]===r&&o[0]===t){t=o[2],i.splice(n,1);break}}return e.call(this,r,t)}}
},{}],"FRpO":[function(require,module,exports) {
"use strict";var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function r(e){console&&console.warn&&console.warn(e)}e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}module.exports=o,module.exports.once=m,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var o,s,c;if(u(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),c=s[t]),void 0===c)c=s[t]=n,++e._eventsCount;else if("function"==typeof c?c=s[t]=i?[n,c]:[c,n]:i?c.unshift(n):c.push(n),(o=f(e))>0&&c.length>o&&!c.warned){c.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=e,v.type=t,v.count=c.length,r(v)}return e}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=v.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?d(i):h(i,i.length)}function a(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function d(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function m(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&L(e,i,{once:!0})})}function L(e,t,n){"function"==typeof e.on&&g(e,"error",t,n)}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var f=o[e];if(void 0===f)return!1;if("function"==typeof f)n(f,this,t);else{var c=f.length,v=h(f,c);for(r=0;r<c;++r)n(v[r],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):a.call(e,t)},o.prototype.listenerCount=a,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};
},{}],"CjVZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertVersionToInt32=exports.SafeEventEmitter=exports.getUniqueId=void 0;const e=require("events"),t=4294967295;let r=Math.floor(Math.random()*t);function o(){return r=(r+1)%t}function n(e,t,r){try{Reflect.apply(e,t,r)}catch(o){setTimeout(()=>{throw o})}}function i(e){const t=e.length,r=new Array(t);for(let o=0;o<t;o+=1)r[o]=e[o];return r}exports.getUniqueId=o;class s extends e.EventEmitter{emit(e,...t){let r="error"===e;const o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const r=new Error(`Unhandled error.${e?` (${e.message})`:""}`);throw r.context=e,r}const s=o[e];if(void 0===s)return!1;if("function"==typeof s)n(s,this,t);else{const e=s.length,r=i(s);for(let o=0;o<e;o+=1)n(r[o],this,t)}return!0}}exports.SafeEventEmitter=s;const l=e=>{let t=e.split(".");if(3!==t.length)throw new Error("Received invalid version string");t.forEach(e=>{if(~~e>999)throw new Error(`Version string invalid, ${e} is too large`)});let r=1e6,o=0;for(let n=0;n<3;n++)o+=~~t[n]*r,r/=1e3;return o};exports.convertVersionToInt32=l;
},{"events":"FRpO"}],"Fbol":[function(require,module,exports) {
"use strict";function t(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}function e(e){const n=document.createTextNode("");let o,i,r=0,u=0;return new e(function(){let t;if(o)i&&(o=i.slice(u).concat(o));else{if(!i)return;o=i}if(i=o,o=null,u=0,"function"==typeof i)return t=i,i=null,void t();for(n.data=r=++r%2;u<i.length;)t=i[u],++u===i.length&&(i=null),t()}).observe(n,{characterData:!0}),function(e){t(e),o?"function"==typeof o?o=[o,e]:o.push(e):(o=e,n.data=r=++r%2)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mutex=exports.Semaphore=void 0;const n=function(){if("function"==typeof queueMicrotask)return function(e){queueMicrotask(t(e))};if("object"==typeof document&&document){if("function"==typeof MutationObserver)return e(MutationObserver);if("function"==typeof window.WebKitMutationObserver)return e(window.WebKitMutationObserver)}if("function"==typeof setImmediate)return function(e){setImmediate(t(e))};if("function"==typeof setTimeout||"object"==typeof setTimeout)return function(e){setTimeout(t(e),0)};throw new Error("No `nextTick` implementation found")}();class o{constructor(t){this.tasks=[],this.count=t}sched(){if(this.count>0&&this.tasks.length>0){this.count--;let t=this.tasks.shift();if(void 0===t)throw"Unexpected undefined value in tasks list";t()}}acquire(){return new Promise((t,e)=>{this.tasks.push(()=>{let e=!1;t(()=>{e||(e=!0,this.count++,this.sched())})}),n(this.sched.bind(this))})}use(t){return this.acquire().then(e=>t().then(t=>(e(),t)).catch(t=>{throw e(),t}))}}exports.Semaphore=o;class i extends o{constructor(){super(1)}}exports.Mutex=i;
},{}],"P8Ws":[function(require,module,exports) {
"use strict";var t=this&&this.__createBinding||(Object.create?function(t,e,n,o){void 0===o&&(o=n),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,o){void 0===o&&(o=n),t[o]=e[n]}),e=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var o={};if(null!=n)for(var i in n)"default"!==i&&Object.prototype.hasOwnProperty.call(n,i)&&t(o,n,i);return e(o,n),o};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GqlSocket=void 0;const o=n(require("nekoton-wasm"));class i{async connect(t,e){return new o.GqlTransport(t,new class{constructor(t){this.nextLatencyDetectionTime=0,this.params=t,this.endpoints=t.endpoints.map(i.expandAddress),1==this.endpoints.length&&(this.currentEndpoint=this.endpoints[0],this.nextLatencyDetectionTime=Number.MAX_VALUE)}isLocal(){return this.params.local}send(t,e){(async()=>{const n=Date.now();try{let i;null!=this.currentEndpoint&&n<this.nextLatencyDetectionTime?i=this.currentEndpoint:null!=this.resolutionPromise?(i=await this.resolutionPromise,delete this.resolutionPromise):(delete this.currentEndpoint,this.resolutionPromise=this._selectQueryingEndpoint().then(t=>(this.currentEndpoint=t,this.nextLatencyDetectionTime=Date.now()+this.params.latencyDetectionInterval,t)),i=await this.resolutionPromise,delete this.resolutionPromise);const r=await fetch(i,{method:"post",headers:{"Content-Type":"application/json"},body:t}).then(t=>t.text());e.onReceive(r)}catch(o){e.onError(o)}})()}async _selectQueryingEndpoint(){const t=this.params.maxLatency||6e4;let e=this.endpoints.length;for(let o=0;o<5;++o){let r;const s=new Promise((t,e)=>{r={resolve:e=>t(e),reject:()=>e(void 0)}});let a,c=0;for(const n of this.endpoints)i.checkLatency(n).then(o=>{if(++c,void 0!==o&&o<=t)return r.resolve(n);(void 0===a||void 0===a.latency||void 0!==o&&o<a.latency)&&(a={endpoint:n,latency:o}),c>=e&&(void 0!==(null==a?void 0:a.latency)?r.resolve(a.endpoint):r.reject())});try{return await s}catch(n){let t;const e=new Promise(e=>{t=(()=>e())});setTimeout(()=>t(),Math.min(100*o,5e3)),await e}}throw new Error("Not available endpoint found")}}(e))}static async checkLatency(t){let e=await fetch(`${t}?query=%7Binfo%7Bversion%20time%20latency%7D%7D`,{method:"get"}).then(t=>t.json()).catch(t=>{console.error(t)});if("object"!=typeof e)return;let n=e.data;if("object"!=typeof n)return;let o=n.info;if("object"!=typeof o)return;let i=o.latency;return"number"==typeof i?i:void 0}}exports.GqlSocket=i,i.expandAddress=(t=>{const e=t.lastIndexOf("/");return(t=e<0?t:t.substring(0,e)).startsWith("http://")||t.startsWith("https://")?`${t}/graphql`:["localhost","127.0.0.1"].indexOf(t)>=0?`http://${t}/graphql`:`https://${t}/graphql`});
},{"nekoton-wasm":"YH9q"}],"T90g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConnectionController=exports.createConnectionController=exports.NETWORK_PRESETS=exports.DEFAULT_NETWORK_GROUP=void 0;const t=require("@broxus/await-semaphore"),e=require("./gql");async function r(t,e,r=!1){let a;if("string"==typeof e){const t=exports.NETWORK_PRESETS[e];if(null==t)throw new Error(`Target preset id not found: ${e}`);a=t}else a=e;for(;;)try{const e=new n(t);return await e.startSwitchingNetwork(a).then(t=>t.switch()),console.debug(`Successfully connected to ${a.group}`),e}catch(o){if(!r)throw o;console.error("Connection failed:",o),await new Promise(t=>{setTimeout(()=>t(),5e3)}),console.log("Restarting connection process")}}exports.DEFAULT_NETWORK_GROUP="mainnet",exports.NETWORK_PRESETS={mainnet:{group:"mainnet",type:"graphql",data:{endpoints:["eri01.main.everos.dev","gra01.main.everos.dev","gra02.main.everos.dev","lim01.main.everos.dev","rbx01.main.everos.dev"],latencyDetectionInterval:6e4,local:!1}},testnet:{group:"testnet",type:"graphql",data:{endpoints:["eri01.net.everos.dev","rbx01.net.everos.dev","gra01.net.everos.dev"],latencyDetectionInterval:6e4,local:!1}},fld:{group:"fld",type:"graphql",data:{endpoints:["gql.custler.net"],latencyDetectionInterval:6e4,local:!1}},local:{group:"localnet",type:"graphql",data:{endpoints:["127.0.0.1"],latencyDetectionInterval:6e4,local:!0}}},exports.createConnectionController=r;class n{constructor(e){this._networkMutex=new t.Mutex,this._acquiredTransportCounter=0,this._clock=e}async acquire(){return a(this._initializedTransport),await this._acquireTransport(),{transport:this._initializedTransport,release:()=>this._releaseTransport()}}async use(t){return a(this._initializedTransport),await this._acquireTransport(),t(this._initializedTransport).finally(()=>{this._releaseTransport()})}async startSwitchingNetwork(t){var e;return null===(e=this._cancelTestTransport)||void 0===e||e.call(this),new class{constructor(t,e,r){this._controller=t,this._release=e,this._params=r}async switch(){await this._controller._connect(this._params).finally(()=>this._release())}}(this,await this._networkMutex.acquire(),t)}get currentConnectionGroup(){var t;return null===(t=this._initializedTransport)||void 0===t?void 0:t.group}async _connect(t){let r;this._initializedTransport&&this._initializedTransport.data.transport.free(),this._initializedTransport=void 0,function(t){t[t.DONE=0]="DONE",t[t.CANCELLED=1]="CANCELLED"}(r||(r={}));const n=async({data:{transport:t}})=>new Promise((e,n)=>{this._cancelTestTransport=(()=>e(r.CANCELLED)),t.getFullContractState("-1:0000000000000000000000000000000000000000000000000000000000000000").then(()=>e(r.DONE)).catch(t=>n(t)),setTimeout(()=>n(new Error("Connection timeout")),1e4)}).finally(()=>this._cancelTestTransport=void 0);try{const{shouldTest:o,transportData:i}=await(async()=>{const r=new e.GqlSocket,n=await r.connect(this._clock,t.data);return{shouldTest:!t.data.local,transport:n,transportData:{type:"graphql",data:{socket:r,transport:n}}}})();if(o&&await n(i)==r.CANCELLED)return void i.data.transport.free();this._initializedTransport=i}catch(a){throw new Error(`Failed to create connection: ${a.toString()}`)}}async _acquireTransport(){console.debug("_acquireTransport"),this._acquiredTransportCounter>0?(console.debug("_acquireTransport -> increase"),this._acquiredTransportCounter+=1):(this._acquiredTransportCounter=1,null!=this._release?console.warn("mutex is already acquired"):(console.debug("_acquireTransport -> await"),this._release=await this._networkMutex.acquire(),console.debug("_acquireTransport -> create")))}_releaseTransport(){var t;console.debug("_releaseTransport"),this._acquiredTransportCounter-=1,this._acquiredTransportCounter<=0&&(console.debug("_releaseTransport -> release"),null===(t=this._release)||void 0===t||t.call(this),this._release=void 0)}}function a(t){if(null==t)throw new Error("Connection is not initialized")}exports.ConnectionController=n;
},{"@broxus/await-semaphore":"Fbol","./gql":"P8Ws"}],"S2yf":[function(require,module,exports) {
"use strict";var t=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),e=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var o in r)"default"!==o&&Object.prototype.hasOwnProperty.call(r,o)&&t(i,r,o);return e(i,r),i};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ContractSubscription=void 0;const i=require("@broxus/await-semaphore"),o=r(require("nekoton-wasm"));class s{constructor(t,e,r,o){this._contractMutex=new i.Mutex,this._pollingInterval=c,this._isRunning=!1,this._transport=t,this._address=r,this._contract=o,this._releaseTransport=e,this._currentPollingMethod=o.pollingMethod}static async subscribe(t,e,r){const{transport:{data:{transport:i}},release:o}=await t.acquire();try{const t=await i.subscribeToGenericContract(e,r);if(null==t)throw new Error(`Failed to subscribe to contract: ${e}`);return new s(i,o,e,t)}catch(n){throw o(),n}}setPollingInterval(t){this._pollingInterval=t}async start(){if(null==this._releaseTransport)throw new Error("Contract subscription must not be started after being closed");this._loopPromise&&(console.debug("ContractSubscription -> awaiting loop promise"),await this._loopPromise),console.debug("ContractSubscription -> loop started"),this._loopPromise=new Promise(async t=>{const e=!(this._transport instanceof o.GqlTransport);this._isRunning=!0;let r=this._currentPollingMethod;for(;this._isRunning;){const t=r!=this._currentPollingMethod;if(r=this._currentPollingMethod,e||"manual"==this._currentPollingMethod){this._currentBlockId=void 0,console.debug("ContractSubscription -> manual -> waiting begins");const t="manual"==this._currentPollingMethod?this._pollingInterval:a;if(await new Promise(e=>{const r=window.setTimeout(()=>{this._refreshTimer=void 0,e()},t);this._refreshTimer=[r,e]}),console.debug("ContractSubscription -> manual -> waiting ends"),!this._isRunning)break;console.debug("ContractSubscription -> manual -> refreshing begins");try{this._currentPollingMethod=await this._contractMutex.use(async()=>(await this._contract.refresh(),this._contract.pollingMethod))}catch(i){console.error(`Error during account refresh (${this._address})`,i)}console.debug("ContractSubscription -> manual -> refreshing ends")}else{const e=this._transport;let r;if(console.debug("ContractSubscription -> reliable start"),t&&null!=this._suggestedBlockId&&(this._currentBlockId=this._suggestedBlockId),this._suggestedBlockId=void 0,null==this._currentBlockId){console.warn("Starting reliable connection with unknown block");try{const t=await e.getLatestBlock(this._address);this._currentBlockId=t.id,r=this._currentBlockId}catch(i){console.error(`Failed to get latest block for ${this._address}`,i);continue}}else try{r=await e.waitForNextBlock(this._currentBlockId,this._address,n)}catch(i){console.error(`Failed to wait for next block for ${this._address}`);continue}try{this._currentPollingMethod=await this._contractMutex.use(async()=>(await this._contract.handleBlock(r),this._contract.pollingMethod)),this._currentBlockId=r}catch(i){console.error(`Failed to handle block for ${this._address}`,i)}}}console.debug("ContractSubscription -> loop finished"),t()})}skipRefreshTimer(){var t,e;window.clearTimeout(null===(t=this._refreshTimer)||void 0===t?void 0:t[0]),null===(e=this._refreshTimer)||void 0===e||e[1](),this._refreshTimer=void 0}async pause(){this._isRunning&&(this._isRunning=!1,this.skipRefreshTimer(),await this._loopPromise,this._loopPromise=void 0,this._currentPollingMethod=await this._contractMutex.use(async()=>this._contract.pollingMethod),this._currentBlockId=void 0,this._suggestedBlockId=void 0)}async stop(){var t;await this.pause(),this._contract.free(),null===(t=this._releaseTransport)||void 0===t||t.call(this),this._releaseTransport=void 0}async prepareReliablePolling(){try{this._transport instanceof o.GqlTransport&&(this._suggestedBlockId=(await this._transport.getLatestBlock(this._address)).id)}catch(t){throw new Error(`Failed to prepare reliable polling: ${t.toString()}`)}}async use(t){const e=await this._contractMutex.acquire();return t(this._contract).then(t=>(e(),t)).catch(t=>{throw e(),t})}}exports.ContractSubscription=s;const n=60,a=2e3,c=6e4;
},{"@broxus/await-semaphore":"Fbol","nekoton-wasm":"YH9q"}],"bHxS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SubscriptionController=void 0;const s=require("@broxus/await-semaphore"),t=require("./subscription"),e=1e4;class i{constructor(t,e){this._subscriptions=new Map,this._subscriptionsMutex=new s.Mutex,this._sendMessageRequests=new Map,this._subscriptionStates=new Map,this._connectionController=t,this._notify=e}async subscribeToContract(s,t){return this._subscriptionsMutex.use(async()=>{let e=!0;const i=this._subscriptionStates.get(s)||n();if(Object.keys(i).map(s=>{if("state"!==s&&"transactions"!==s)throw new Error(`Unknown subscription topic: ${s}`);const n=t[s];if("boolean"!=typeof n)throw new Error(`Unknown subscription topic value: ${n}`);i[s]=n,e&&(e=!i[s])}),e)return this._subscriptionStates.delete(s),await this._tryUnsubscribe(s),{...i};let o=this._subscriptions.get(s);return null==o&&(o=await this._createSubscription(s)),this._subscriptionStates.set(s,i),o&&await o.start(),{...i}})}async unsubscribeFromContract(s){await this.subscribeToContract(s,{state:!1,transactions:!1})}async unsubscribeFromAllContracts(){const s=Array.from(this._subscriptions.keys());for(const t of s)await this.unsubscribeFromContract(t)}get subscriptionStates(){return[...this._subscriptionStates].reduce((s,[t,e])=>(s[t]=e,s),{})}async _createSubscription(s){const i=new class{constructor(s,t){this._enabled=!1,this._address=s,this._controller=t}enabledNotifications(){this._enabled=!0}onMessageExpired(s){this._enabled&&this._controller._rejectMessageRequest(this._address,s.bodyHash,new Error("Message expired")).catch(console.error)}onMessageSent(s,t){this._enabled&&this._controller._resolveMessageRequest(this._address,s.bodyHash,t).catch(console.error)}onStateChanged(s){this._enabled&&this._controller._notifyStateChanged(this._address,s)}onTransactionsFound(s,t){this._enabled&&this._controller._notifyTransactionsFound(this._address,s,t)}}(s,this),n=await t.ContractSubscription.subscribe(this._connectionController,s,i);return n.setPollingInterval(e),i.enabledNotifications(),this._subscriptions.set(s,n),n}async _tryUnsubscribe(s){const t=this._subscriptionStates.get(s),e=this._sendMessageRequests.get(s);if(null==t&&0==((null==e?void 0:e.size)||0)){const t=this._subscriptions.get(s);this._subscriptions.delete(s),await(null==t?void 0:t.stop())}}async _rejectMessageRequest(s,t,e){this._deleteMessageRequestAndGetCallback(s,t).reject(e),await this._subscriptionsMutex.use(async()=>this._tryUnsubscribe(s))}async _resolveMessageRequest(s,t,e){this._deleteMessageRequestAndGetCallback(s,t).resolve(e),await this._subscriptionsMutex.use(async()=>this._tryUnsubscribe(s))}_notifyStateChanged(s,t){const e=this._subscriptionStates.get(s);(null==e?void 0:e.state)&&this._notify("contractStateChanged",{address:s,state:t})}_notifyTransactionsFound(s,t,e){const i=this._subscriptionStates.get(s);(null==i?void 0:i.transactions)&&this._notify("transactionsFound",{address:s,transactions:t,info:e})}_deleteMessageRequestAndGetCallback(s,t){var e;const i=null===(e=this._sendMessageRequests.get(s))||void 0===e?void 0:e.get(t);if(!i)throw new Error(`SendMessage request with id '${t}' not found`);return this._deleteMessageRequest(s,t),i}_deleteMessageRequest(s,t){const e=this._sendMessageRequests.get(s);e&&(e.delete(t),0==e.size&&this._sendMessageRequests.delete(s))}}exports.SubscriptionController=i;const n=()=>({state:!1,transactions:!1});
},{"@broxus/await-semaphore":"Fbol","./subscription":"S2yf"}],"oFYt":[function(require,module,exports) {
"use strict";var t=this&&this.__createBinding||(Object.create?function(t,r,n,e){void 0===e&&(e=n),Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[n]}})}:function(t,r,n,e){void 0===e&&(e=n),t[e]=r[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),n=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(null!=n)for(var o in n)"default"!==o&&Object.prototype.hasOwnProperty.call(n,o)&&t(e,n,o);return r(e,n),e},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.EverscaleStandaloneClient=exports.SUPPORTED_PERMISSIONS=exports.VERSION=exports.DEFAULT_CLIENT_PROPERTIES=exports.NETWORK_PRESETS=void 0;const o=n(require("nekoton-wasm")),s=o,a=e(require("fast-safe-stringify")),c=require("./utils"),i=require("./connectionController"),u=require("./subscriptionController");var l=require("./connectionController");Object.defineProperty(exports,"NETWORK_PRESETS",{enumerable:!0,get:function(){return l.NETWORK_PRESETS}});let p,d=!1,m=new Promise((t,r)=>{p={resolve:t,reject:r}});function h(){return d||(d=!0,(0,o.default)().then(p.resolve).catch(p.reject)),m}exports.DEFAULT_CLIENT_PROPERTIES={connection:i.DEFAULT_NETWORK_GROUP},exports.VERSION="0.2.25",exports.SUPPORTED_PERMISSIONS=["basic"];class b extends c.SafeEventEmitter{constructor(t){super(),this._handlers={requestPermissions:y,disconnect:f,subscribe:w,unsubscribe:g,unsubscribeAll:S,getProviderState:v,getFullContractState:C,getAccountsByCodeHash:E,getTransactions:T,getTransaction:P,runLocal:_,getExpectedAddress:I,getBocHash:O,packIntoCell:x,unpackFromCell:R,extractPublicKey:A,codeToTvc:k,splitTvc:j,encodeInternalInput:N,decodeInput:$,decodeEvent:F,decodeOutput:K,decodeTransaction:D,decodeTransactionEvents:q,verifySignature:H},this._context=t}static async create(t){await h();let r={};const n=(t,n)=>{var e,o;null===(o=null===(e=r.client)||void 0===e?void 0:e.deref())||void 0===o||o.emit(t,n)},e=new s.ClockWithOffset,o=await(0,i.createConnectionController)(e,t.connection),a=new u.SubscriptionController(o,n),c=new b({clock:e,permissions:{},connectionController:o,subscriptionController:a,notify:n});return r.client=new WeakRef(c),c}request(t){const r=this._handlers[t.method];if(null==r)throw nt(t,`Method '${t.method}' is not supported by standalone provider`);return r(this._context,t)}}exports.EverscaleStandaloneClient=b;const y=async(t,r)=>{M(r);const{permissions:n}=r.params;J(r,r.params,"permissions");const e={...t.permissions};for(const o of n){if("basic"!==o&&"tonClient"!==o)throw nt(r,`Permission '${o}' is not supported by standalone provider`);e.basic=!0}return t.permissions=e,t.notify("permissionsChanged",{permissions:{...e}}),{...e}},f=async(t,r)=>{t.permissions={},await t.subscriptionController.unsubscribeFromAllContracts(),t.notify("permissionsChanged",{permissions:{}})},w=async(t,r)=>{M(r);const{address:n,subscriptions:e}=r.params;if(B(r,r.params,"address"),U(r,r.params,"subscriptions"),!s.checkAddress(n))throw nt(r,"Invalid address");try{return await t.subscriptionController.subscribeToContract(n,e)}catch(o){throw nt(r,o.toString())}},g=async(t,r)=>{M(r);const{address:n}=r.params;if(B(r,r.params,"address"),!s.checkAddress(n))throw nt(r,"Invalid address");await t.subscriptionController.unsubscribeFromContract(n)},S=async(t,r)=>{await t.subscriptionController.unsubscribeFromAllContracts()},v=async(t,r)=>{const n=t.connectionController.currentConnectionGroup;if(null==n)throw nt(r,"Connection controller was not initialized");const e=exports.VERSION;return{version:e,numericVersion:(0,c.convertVersionToInt32)(e),selectedConnection:n,supportedPermissions:[...exports.SUPPORTED_PERMISSIONS],permissions:{...t.permissions},subscriptions:t.subscriptionController.subscriptionStates}},C=async(t,r)=>{M(r);const{address:n}=r.params;B(r,r.params,"address");const{connectionController:e}=t;try{return e.use(async({data:{transport:t}})=>({state:await t.getFullContractState(n)}))}catch(o){throw nt(r,o.toString())}},E=async(t,r)=>{M(r);const{codeHash:n,limit:e,continuation:o}=r.params;B(r,r.params,"codeHash"),G(r,r.params,"limit"),z(r,r.params,"continuation");const{connectionController:s}=t;try{return s.use(({data:{transport:t}})=>t.getAccountsByCodeHash(n,e||50,o))}catch(a){throw nt(r,a.toString())}},T=async(t,r)=>{M(r);const{address:n,continuation:e,limit:o}=r.params;B(r,r.params,"address"),Q(r,r.params,"continuation",X),G(r,r.params,"limit");const{connectionController:s}=t;try{return s.use(({data:{transport:t}})=>t.getTransactions(n,e,o||50))}catch(a){throw nt(r,a.toString())}},P=async(t,r)=>{M(r);const{hash:n}=r.params;B(r,r.params,"hash");const{connectionController:e}=t;try{return{transaction:await e.use(({data:{transport:t}})=>t.getTransaction(n))}}catch(o){throw nt(r,o.toString())}},_=async(t,r)=>{M(r);const{address:n,cachedState:e,responsible:o,functionCall:a}=r.params;B(r,r.params,"address"),Q(r,r.params,"cachedState",Z),W(r,r.params,"responsible"),tt(r,r.params,"functionCall");const{clock:c,connectionController:i}=t;let u=e;if(null==u&&(u=await i.use(async({data:{transport:t}})=>t.getFullContractState(n))),null==u)throw nt(r,"Account not found");if(!u.isDeployed||null==u.lastTransactionId)throw nt(r,"Account is not deployed");try{const{output:t,code:n}=s.runLocal(c,u.boc,a.abi,a.method,a.params,o||!1);return{output:t,code:n}}catch(l){throw nt(r,l.toString())}},I=async(t,r)=>{M(r);const{tvc:n,abi:e,workchain:o,publicKey:a,initParams:c}=r.params;B(r,r.params,"tvc"),B(r,r.params,"abi"),G(r,r.params,"workchain"),z(r,r.params,"publicKey");try{return{address:s.getExpectedAddress(n,e,o||0,a,c)}}catch(i){throw nt(r,i.toString())}},O=async(t,r)=>{M(r);const{boc:n}=r.params;B(r,r.params,"boc");try{return{hash:s.getBocHash(n)}}catch(e){throw nt(r,e.toString())}},x=async(t,r)=>{M(r);const{structure:n,data:e}=r.params;J(r,r.params,"structure");try{return{boc:s.packIntoCell(n,e)}}catch(o){throw nt(r,o.toString())}},R=async(t,r)=>{M(r);const{structure:n,boc:e,allowPartial:o}=r.params;J(r,r.params,"structure"),B(r,r.params,"boc"),V(r,r.params,"allowPartial");try{return{data:s.unpackFromCell(n,e,o)}}catch(a){throw nt(r,a.toString())}},A=async(t,r)=>{M(r);const{boc:n}=r.params;B(r,r.params,"boc");try{return{publicKey:s.extractPublicKey(n)}}catch(e){throw nt(r,e.toString())}},k=async(t,r)=>{M(r);const{code:n}=r.params;B(r,r.params,"code");try{return{tvc:s.codeToTvc(n)}}catch(e){throw nt(r,e.toString())}},j=async(t,r)=>{M(r);const{tvc:n}=r.params;B(r,r.params,"tvc");try{return s.splitTvc(n)}catch(e){throw nt(r,e.toString())}},N=async(t,r)=>{M(r),tt(r,r,"params");const{abi:n,method:e,params:o}=r.params;try{return{boc:s.encodeInternalInput(n,e,o)}}catch(a){throw nt(r,a.toString())}},$=async(t,r)=>{M(r);const{body:n,abi:e,method:o,internal:a}=r.params;B(r,r.params,"body"),B(r,r.params,"abi"),rt(r,r.params,"method"),V(r,r.params,"internal");try{return s.decodeInput(n,e,o,a)||null}catch(c){throw nt(r,c.toString())}},F=async(t,r)=>{M(r);const{body:n,abi:e,event:o}=r.params;B(r,r.params,"body"),B(r,r.params,"abi"),rt(r,r.params,"event");try{return s.decodeEvent(n,e,o)||null}catch(a){throw nt(r,a.toString())}},K=async(t,r)=>{M(r);const{body:n,abi:e,method:o}=r.params;B(r,r.params,"body"),B(r,r.params,"abi"),rt(r,r.params,"method");try{return s.decodeOutput(n,e,o)||null}catch(a){throw nt(r,a.toString())}},D=async(t,r)=>{M(r);const{transaction:n,abi:e,method:o}=r.params;B(r,r.params,"abi"),rt(r,r.params,"method");try{return s.decodeTransaction(n,e,o)||null}catch(a){throw nt(r,a.toString())}},q=async(t,r)=>{M(r);const{transaction:n,abi:e}=r.params;B(r,r.params,"abi");try{return{events:s.decodeTransactionEvents(n,e)}}catch(o){throw nt(r,o.toString())}},H=async(t,r)=>{M(r);const{publicKey:n,dataHash:e,signature:o}=r.params;B(r,r.params,"publicKey"),B(r,r.params,"dataHash"),B(r,r.params,"signature");try{return{isValid:s.verifySignature(n,e,o)}}catch(a){throw nt(r,a.toString())}};function M(t){if(null==t.params||"object"!=typeof t.params)throw nt(t,"required params object")}function L(t,r,n){if("object"!=typeof r[n])throw nt(t,`'${n}' must be an object`)}function U(t,r,n){const e=r[n];if(null!=e&&"object"!=typeof e)throw nt(t,`'${n}' must be an object if specified`)}function V(t,r,n){if("boolean"!=typeof r[n])throw nt(t,`'${n}' must be a boolean`)}function W(t,r,n){const e=r[n];if(null!=e&&"boolean"!=typeof e)throw nt(t,`'${n}' must be a boolean if specified`)}function B(t,r,n){const e=r[n];if("string"!=typeof e||0===e.length)throw nt(t,`'${n}' must be non-empty string`)}function z(t,r,n){const e=r[n];if(null!=e&&("string"!=typeof e||0===e.length))throw nt(t,`'${n}' must be a non-empty string if provided`)}function G(t,r,n){const e=r[n];if(null!=e&&"number"!=typeof e)throw nt(t,`'${n}' must be a number if provider`)}function J(t,r,n){const e=r[n];if(!Array.isArray(e))throw nt(t,`'${n}' must be an array`)}function Q(t,r,n,e){null!=r[n]&&e(t,r,n)}function X(t,r,n){L(t,r,n);const e=r[n];B(t,e,"lt"),B(t,e,"hash")}function Y(t,r,n){L(t,r,n);const e=r[n];V(t,e,"isExact"),B(t,e,"lt"),z(t,e,"hash")}function Z(t,r,n){L(t,r,n);const e=r[n];B(t,e,"balance"),Q(t,e,"lastTransactionId",Y),V(t,e,"isDeployed")}function tt(t,r,n){L(t,r,n);const e=r[n];B(t,e,"abi"),B(t,e,"method"),L(t,e,"params")}function rt(t,r,n){const e=r[n];if("string"!=typeof e&&!Array.isArray(e))throw nt(t,`'${n}' must be a method name or an array of possible names`)}const nt=(t,r,n)=>new et(2,`${t.method}: ${r}`,n);class et extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer');if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');super(r),this.code=t,this.data=n}serialize(){const t={code:this.code,message:this.message};return void 0!==this.data&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return(0,a.default)(this.serialize(),ot,2)}}const ot=(t,r)=>{if("[Circular]"!==r)return r};
},{"nekoton-wasm":"YH9q","fast-safe-stringify":"SQZr","./utils":"CjVZ","./connectionController":"T90g","./subscriptionController":"bHxS"}],"vrSf":[function(require,module,exports) {
var define;
var e;!function(r){"use strict";var n,t=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,o=Math.floor,s="[BigNumber Error] ",f=s+"Number primitive has more than 15 significant digits: ",u=1e14,l=14,c=9007199254740991,a=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,g=1e9;function p(e){var r=0|e;return e>0||e===r?r:r-1}function w(e){for(var r,n,t=1,i=e.length,o=e[0]+"";t<i;){for(r=e[t++]+"",n=l-r.length;n--;r="0"+r);o+=r}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function m(e,r){var n,t,i=e.c,o=r.c,s=e.s,f=r.s,u=e.e,l=r.e;if(!s||!f)return null;if(n=i&&!i[0],t=o&&!o[0],n||t)return n?t?0:-f:s;if(s!=f)return s;if(n=s<0,t=u==l,!i||!o)return t?0:!i^n?1:-1;if(!t)return u>l^n?1:-1;for(f=(u=i.length)<(l=o.length)?u:l,s=0;s<f;s++)if(i[s]!=o[s])return i[s]>o[s]^n?1:-1;return u==l?0:u>l^n?1:-1}function d(e,r,n,t){if(e<r||e>n||e!==o(e))throw Error(s+(t||"Argument")+("number"==typeof e?e<r||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function v(e){var r=e.c.length-1;return p(e.e/l)==r&&e.c[r]%2!=0}function N(e,r){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(r<0?"e":"e+")+r}function O(e,r,n){var t,i;if(r<0){for(i=n+".";++r;i+=n);e=i+e}else if(++r>(t=e.length)){for(i=n,r-=t;--r;i+=n);e+=i}else r<t&&(e=e.slice(0,r)+"."+e.slice(r));return e}(n=function e(r){var n,y,b,E,A,S,R,_,B,D=$.prototype={constructor:$,toString:null,valueOf:null},P=new $(1),x=20,L=4,U=-7,I=21,T=-1e7,C=1e7,M=!1,G=1,k=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},q="0123456789abcdefghijklmnopqrstuvwxyz",j=!0;function $(e,r){var n,i,s,u,a,h,g,p,w=this;if(!(w instanceof $))return new $(e,r);if(null==r){if(e&&!0===e._isBigNumber)return w.s=e.s,void(!e.c||e.e>C?w.c=w.e=null:e.e<T?w.c=[w.e=0]:(w.e=e.e,w.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(w.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,a=e;a>=10;a/=10,u++);return void(u>C?w.c=w.e=null:(w.e=u,w.c=[e]))}p=String(e)}else{if(!t.test(p=String(e)))return b(w,p,h);w.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(u=p.indexOf("."))>-1&&(p=p.replace(".","")),(a=p.search(/e/i))>0?(u<0&&(u=a),u+=+p.slice(a+1),p=p.substring(0,a)):u<0&&(u=p.length)}else{if(d(r,2,q.length,"Base"),10==r&&j)return W(w=new $(e),x+w.e+1,L);if(p=String(e),h="number"==typeof e){if(0*e!=0)return b(w,p,h,r);if(w.s=1/e<0?(p=p.slice(1),-1):1,$.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(f+e)}else w.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(n=q.slice(0,r),u=a=0,g=p.length;a<g;a++)if(n.indexOf(i=p.charAt(a))<0){if("."==i){if(a>u){u=g;continue}}else if(!s&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){s=!0,a=-1,u=0;continue}return b(w,String(e),h,r)}h=!1,(u=(p=y(p,r,10,w.s)).indexOf("."))>-1?p=p.replace(".",""):u=p.length}for(a=0;48===p.charCodeAt(a);a++);for(g=p.length;48===p.charCodeAt(--g););if(p=p.slice(a,++g)){if(g-=a,h&&$.DEBUG&&g>15&&(e>c||e!==o(e)))throw Error(f+w.s*e);if((u=u-a-1)>C)w.c=w.e=null;else if(u<T)w.c=[w.e=0];else{if(w.e=u,w.c=[],a=(u+1)%l,u<0&&(a+=l),a<g){for(a&&w.c.push(+p.slice(0,a)),g-=l;a<g;)w.c.push(+p.slice(a,a+=l));a=l-(p=p.slice(a)).length}else a-=g;for(;a--;p+="0");w.c.push(+p)}}else w.c=[w.e=0]}function z(e,r,n,t){var i,o,s,f,u;if(null==n?n=L:d(n,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==r)u=w(e.c),u=1==t||2==t&&(s<=U||s>=I)?N(u,s):O(u,s,"0");else if(o=(e=W(new $(e),r,n)).e,f=(u=w(e.c)).length,1==t||2==t&&(r<=o||o<=U)){for(;f<r;u+="0",f++);u=N(u,o)}else if(r-=s,u=O(u,o,"0"),o+1>f){if(--r>0)for(u+=".";r--;u+="0");}else if((r+=o-f)>0)for(o+1==f&&(u+=".");r--;u+="0");return e.s<0&&i?"-"+u:u}function H(e,r){for(var n,t=1,i=new $(e[0]);t<e.length;t++){if(!(n=new $(e[t])).s){i=n;break}r.call(i,n)&&(i=n)}return i}function V(e,r,n){for(var t=1,i=r.length;!r[--i];r.pop());for(i=r[0];i>=10;i/=10,t++);return(n=t+n*l-1)>C?e.c=e.e=null:n<T?e.c=[e.e=0]:(e.e=n,e.c=r),e}function W(e,r,n,t){var s,f,c,h,g,p,w,m=e.c,d=a;if(m){e:{for(s=1,h=m[0];h>=10;h/=10,s++);if((f=r-s)<0)f+=l,c=r,w=(g=m[p=0])/d[s-c-1]%10|0;else if((p=i((f+1)/l))>=m.length){if(!t)break e;for(;m.length<=p;m.push(0));g=w=0,s=1,c=(f%=l)-l+1}else{for(g=h=m[p],s=1;h>=10;h/=10,s++);w=(c=(f%=l)-l+s)<0?0:g/d[s-c-1]%10|0}if(t=t||r<0||null!=m[p+1]||(c<0?g:g%d[s-c-1]),t=n<4?(w||t)&&(0==n||n==(e.s<0?3:2)):w>5||5==w&&(4==n||t||6==n&&(f>0?c>0?g/d[s-c]:0:m[p-1])%10&1||n==(e.s<0?8:7)),r<1||!m[0])return m.length=0,t?(r-=e.e+1,m[0]=d[(l-r%l)%l],e.e=-r||0):m[0]=e.e=0,e;if(0==f?(m.length=p,h=1,p--):(m.length=p+1,h=d[l-f],m[p]=c>0?o(g/d[s-c]%d[c])*h:0),t)for(;;){if(0==p){for(f=1,c=m[0];c>=10;c/=10,f++);for(c=m[0]+=h,h=1;c>=10;c/=10,h++);f!=h&&(e.e++,m[0]==u&&(m[0]=1));break}if(m[p]+=h,m[p]!=u)break;m[p--]=0,h=1}for(f=m.length;0===m[--f];m.pop());}e.e>C?e.c=e.e=null:e.e<T&&(e.c=[e.e=0])}return e}function X(e){var r,n=e.e;return null===n?e.toString():(r=w(e.c),r=n<=U||n>=I?N(r,n):O(r,n,"0"),e.s<0?"-"+r:r)}return $.clone=e,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=$.set=function(e){var r,n;if(null!=e){if("object"!=typeof e)throw Error(s+"Object expected: "+e);if(e.hasOwnProperty(r="DECIMAL_PLACES")&&(d(n=e[r],0,g,r),x=n),e.hasOwnProperty(r="ROUNDING_MODE")&&(d(n=e[r],0,8,r),L=n),e.hasOwnProperty(r="EXPONENTIAL_AT")&&((n=e[r])&&n.pop?(d(n[0],-g,0,r),d(n[1],0,g,r),U=n[0],I=n[1]):(d(n,-g,g,r),U=-(I=n<0?-n:n))),e.hasOwnProperty(r="RANGE"))if((n=e[r])&&n.pop)d(n[0],-g,-1,r),d(n[1],1,g,r),T=n[0],C=n[1];else{if(d(n,-g,g,r),!n)throw Error(s+r+" cannot be zero: "+n);T=-(C=n<0?-n:n)}if(e.hasOwnProperty(r="CRYPTO")){if((n=e[r])!==!!n)throw Error(s+r+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw M=!n,Error(s+"crypto unavailable");M=n}else M=n}if(e.hasOwnProperty(r="MODULO_MODE")&&(d(n=e[r],0,9,r),G=n),e.hasOwnProperty(r="POW_PRECISION")&&(d(n=e[r],0,g,r),k=n),e.hasOwnProperty(r="FORMAT")){if("object"!=typeof(n=e[r]))throw Error(s+r+" not an object: "+n);F=n}if(e.hasOwnProperty(r="ALPHABET")){if("string"!=typeof(n=e[r])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(s+r+" invalid: "+n);j="0123456789"==n.slice(0,10),q=n}}return{DECIMAL_PLACES:x,ROUNDING_MODE:L,EXPONENTIAL_AT:[U,I],RANGE:[T,C],CRYPTO:M,MODULO_MODE:G,POW_PRECISION:k,FORMAT:F,ALPHABET:q}},$.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!$.DEBUG)return!0;var r,n,t=e.c,i=e.e,f=e.s;e:if("[object Array]"=={}.toString.call(t)){if((1===f||-1===f)&&i>=-g&&i<=g&&i===o(i)){if(0===t[0]){if(0===i&&1===t.length)return!0;break e}if((r=(i+1)%l)<1&&(r+=l),String(t[0]).length==r){for(r=0;r<t.length;r++)if((n=t[r])<0||n>=u||n!==o(n))break e;if(0!==n)return!0}}}else if(null===t&&null===i&&(null===f||1===f||-1===f))return!0;throw Error(s+"Invalid BigNumber: "+e)},$.maximum=$.max=function(){return H(arguments,D.lt)},$.minimum=$.min=function(){return H(arguments,D.gt)},$.random=(E=9007199254740992*Math.random()&2097151?function(){return o(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var r,n,t,f,u,c=0,h=[],p=new $(P);if(null==e?e=x:d(e,0,g),f=i(e/l),M)if(crypto.getRandomValues){for(r=crypto.getRandomValues(new Uint32Array(f*=2));c<f;)(u=131072*r[c]+(r[c+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),r[c]=n[0],r[c+1]=n[1]):(h.push(u%1e14),c+=2);c=f/2}else{if(!crypto.randomBytes)throw M=!1,Error(s+"crypto unavailable");for(r=crypto.randomBytes(f*=7);c<f;)(u=281474976710656*(31&r[c])+1099511627776*r[c+1]+4294967296*r[c+2]+16777216*r[c+3]+(r[c+4]<<16)+(r[c+5]<<8)+r[c+6])>=9e15?crypto.randomBytes(7).copy(r,c):(h.push(u%1e14),c+=7);c=f/7}if(!M)for(;c<f;)(u=E())<9e15&&(h[c++]=u%1e14);for(f=h[--c],e%=l,f&&e&&(u=a[l-e],h[c]=o(f/u)*u);0===h[c];h.pop(),c--);if(c<0)h=[t=0];else{for(t=-1;0===h[0];h.splice(0,1),t-=l);for(c=1,u=h[0];u>=10;u/=10,c++);c<l&&(t-=l-c)}return p.e=t,p.c=h,p}),$.sum=function(){for(var e=1,r=arguments,n=new $(r[0]);e<r.length;)n=n.plus(r[e++]);return n},y=function(){function e(e,r,n,t){for(var i,o,s=[0],f=0,u=e.length;f<u;){for(o=s.length;o--;s[o]*=r);for(s[0]+=t.indexOf(e.charAt(f++)),i=0;i<s.length;i++)s[i]>n-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/n|0,s[i]%=n)}return s.reverse()}return function(r,t,i,o,s){var f,u,l,c,a,h,g,p,m=r.indexOf("."),d=x,v=L;for(m>=0&&(c=k,k=0,r=r.replace(".",""),h=(p=new $(t)).pow(r.length-m),k=c,p.c=e(O(w(h.c),h.e,"0"),10,i,"0123456789"),p.e=p.c.length),l=c=(g=e(r,t,i,s?(f=q,"0123456789"):(f="0123456789",q))).length;0==g[--c];g.pop());if(!g[0])return f.charAt(0);if(m<0?--l:(h.c=g,h.e=l,h.s=o,g=(h=n(h,p,d,v,i)).c,a=h.r,l=h.e),m=g[u=l+d+1],c=i/2,a=a||u<0||null!=g[u+1],a=v<4?(null!=m||a)&&(0==v||v==(h.s<0?3:2)):m>c||m==c&&(4==v||a||6==v&&1&g[u-1]||v==(h.s<0?8:7)),u<1||!g[0])r=a?O(f.charAt(1),-d,f.charAt(0)):f.charAt(0);else{if(g.length=u,a)for(--i;++g[--u]>i;)g[u]=0,u||(++l,g=[1].concat(g));for(c=g.length;!g[--c];);for(m=0,r="";m<=c;r+=f.charAt(g[m++]));r=O(r,l,f.charAt(0))}return r}}(),n=function(){function e(e,r,n){var t,i,o,s,f=0,u=e.length,l=r%h,c=r/h|0;for(e=e.slice();u--;)f=((i=l*(o=e[u]%h)+(t=c*o+(s=e[u]/h|0)*l)%h*h+f)/n|0)+(t/h|0)+c*s,e[u]=i%n;return f&&(e=[f].concat(e)),e}function r(e,r,n,t){var i,o;if(n!=t)o=n>t?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=r[i]){o=e[i]>r[i]?1:-1;break}return o}function n(e,r,n,t){for(var i=0;n--;)e[n]-=i,i=e[n]<r[n]?1:0,e[n]=i*t+e[n]-r[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(t,i,s,f,c){var a,h,g,w,m,d,v,N,O,y,b,E,A,S,R,_,B,D=t.s==i.s?1:-1,P=t.c,x=i.c;if(!(P&&P[0]&&x&&x[0]))return new $(t.s&&i.s&&(P?!x||P[0]!=x[0]:x)?P&&0==P[0]||!x?0*D:D/0:NaN);for(O=(N=new $(D)).c=[],D=s+(h=t.e-i.e)+1,c||(c=u,h=p(t.e/l)-p(i.e/l),D=D/l|0),g=0;x[g]==(P[g]||0);g++);if(x[g]>(P[g]||0)&&h--,D<0)O.push(1),w=!0;else{for(S=P.length,_=x.length,g=0,D+=2,(m=o(c/(x[0]+1)))>1&&(x=e(x,m,c),P=e(P,m,c),_=x.length,S=P.length),A=_,b=(y=P.slice(0,_)).length;b<_;y[b++]=0);B=x.slice(),B=[0].concat(B),R=x[0],x[1]>=c/2&&R++;do{if(m=0,(a=r(x,y,_,b))<0){if(E=y[0],_!=b&&(E=E*c+(y[1]||0)),(m=o(E/R))>1)for(m>=c&&(m=c-1),v=(d=e(x,m,c)).length,b=y.length;1==r(d,y,v,b);)m--,n(d,_<v?B:x,v,c),v=d.length,a=1;else 0==m&&(a=m=1),v=(d=x.slice()).length;if(v<b&&(d=[0].concat(d)),n(y,d,b,c),b=y.length,-1==a)for(;r(x,y,_,b)<1;)m++,n(y,_<b?B:x,b,c),b=y.length}else 0===a&&(m++,y=[0]);O[g++]=m,y[0]?y[b++]=P[A]||0:(y=[P[A]],b=1)}while((A++<S||null!=y[0])&&D--);w=null!=y[0],O[0]||O.splice(0,1)}if(c==u){for(g=1,D=O[0];D>=10;D/=10,g++);W(N,s+(N.e=g+h*l-1)+1,f,w)}else N.e=h,N.r=+w;return N}}(),A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,S=/^([^.]+)\.$/,R=/^\.([^.]+)$/,_=/^-?(Infinity|NaN)$/,B=/^\s*\+(?=[\w.])|^\s+|\s+$/g,b=function(e,r,n,t){var i,o=n?r:r.replace(B,"");if(_.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!n&&(o=o.replace(A,function(e,r,n){return i="x"==(n=n.toLowerCase())?16:"b"==n?2:8,t&&t!=i?e:r}),t&&(i=t,o=o.replace(S,"$1").replace(R,"0.$1")),r!=o))return new $(o,i);if($.DEBUG)throw Error(s+"Not a"+(t?" base "+t:"")+" number: "+r);e.s=null}e.c=e.e=null},D.absoluteValue=D.abs=function(){var e=new $(this);return e.s<0&&(e.s=1),e},D.comparedTo=function(e,r){return m(this,new $(e,r))},D.decimalPlaces=D.dp=function(e,r){var n,t,i,o=this;if(null!=e)return d(e,0,g),null==r?r=L:d(r,0,8),W(new $(o),e+o.e+1,r);if(!(n=o.c))return null;if(t=((i=n.length-1)-p(this.e/l))*l,i=n[i])for(;i%10==0;i/=10,t--);return t<0&&(t=0),t},D.dividedBy=D.div=function(e,r){return n(this,new $(e,r),x,L)},D.dividedToIntegerBy=D.idiv=function(e,r){return n(this,new $(e,r),0,1)},D.exponentiatedBy=D.pow=function(e,r){var n,t,f,u,c,a,h,g,p=this;if((e=new $(e)).c&&!e.isInteger())throw Error(s+"Exponent not an integer: "+X(e));if(null!=r&&(r=new $(r)),c=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return g=new $(Math.pow(+X(p),c?2-v(e):+X(e))),r?g.mod(r):g;if(a=e.s<0,r){if(r.c?!r.c[0]:!r.s)return new $(NaN);(t=!a&&p.isInteger()&&r.isInteger())&&(p=p.mod(r))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||c&&p.c[1]>=24e7:p.c[0]<8e13||c&&p.c[0]<=9999975e7)))return u=p.s<0&&v(e)?-0:0,p.e>-1&&(u=1/u),new $(a?1/u:u);k&&(u=i(k/l+2))}for(c?(n=new $(.5),a&&(e.s=1),h=v(e)):h=(f=Math.abs(+X(e)))%2,g=new $(P);;){if(h){if(!(g=g.times(p)).c)break;u?g.c.length>u&&(g.c.length=u):t&&(g=g.mod(r))}if(f){if(0===(f=o(f/2)))break;h=f%2}else if(W(e=e.times(n),e.e+1,1),e.e>14)h=v(e);else{if(0==(f=+X(e)))break;h=f%2}p=p.times(p),u?p.c&&p.c.length>u&&(p.c.length=u):t&&(p=p.mod(r))}return t?g:(a&&(g=P.div(g)),r?g.mod(r):u?W(g,k,L,void 0):g)},D.integerValue=function(e){var r=new $(this);return null==e?e=L:d(e,0,8),W(r,r.e+1,e)},D.isEqualTo=D.eq=function(e,r){return 0===m(this,new $(e,r))},D.isFinite=function(){return!!this.c},D.isGreaterThan=D.gt=function(e,r){return m(this,new $(e,r))>0},D.isGreaterThanOrEqualTo=D.gte=function(e,r){return 1===(r=m(this,new $(e,r)))||0===r},D.isInteger=function(){return!!this.c&&p(this.e/l)>this.c.length-2},D.isLessThan=D.lt=function(e,r){return m(this,new $(e,r))<0},D.isLessThanOrEqualTo=D.lte=function(e,r){return-1===(r=m(this,new $(e,r)))||0===r},D.isNaN=function(){return!this.s},D.isNegative=function(){return this.s<0},D.isPositive=function(){return this.s>0},D.isZero=function(){return!!this.c&&0==this.c[0]},D.minus=function(e,r){var n,t,i,o,s=this,f=s.s;if(r=(e=new $(e,r)).s,!f||!r)return new $(NaN);if(f!=r)return e.s=-r,s.plus(e);var c=s.e/l,a=e.e/l,h=s.c,g=e.c;if(!c||!a){if(!h||!g)return h?(e.s=-r,e):new $(g?s:NaN);if(!h[0]||!g[0])return g[0]?(e.s=-r,e):new $(h[0]?s:3==L?-0:0)}if(c=p(c),a=p(a),h=h.slice(),f=c-a){for((o=f<0)?(f=-f,i=h):(a=c,i=g),i.reverse(),r=f;r--;i.push(0));i.reverse()}else for(t=(o=(f=h.length)<(r=g.length))?f:r,f=r=0;r<t;r++)if(h[r]!=g[r]){o=h[r]<g[r];break}if(o&&(i=h,h=g,g=i,e.s=-e.s),(r=(t=g.length)-(n=h.length))>0)for(;r--;h[n++]=0);for(r=u-1;t>f;){if(h[--t]<g[t]){for(n=t;n&&!h[--n];h[n]=r);--h[n],h[t]+=u}h[t]-=g[t]}for(;0==h[0];h.splice(0,1),--a);return h[0]?V(e,h,a):(e.s=3==L?-1:1,e.c=[e.e=0],e)},D.modulo=D.mod=function(e,r){var t,i,o=this;return e=new $(e,r),!o.c||!e.s||e.c&&!e.c[0]?new $(NaN):!e.c||o.c&&!o.c[0]?new $(o):(9==G?(i=e.s,e.s=1,t=n(o,e,0,3),e.s=i,t.s*=i):t=n(o,e,0,G),(e=o.minus(t.times(e))).c[0]||1!=G||(e.s=o.s),e)},D.multipliedBy=D.times=function(e,r){var n,t,i,o,s,f,c,a,g,w,m,d,v,N,O,y=this,b=y.c,E=(e=new $(e,r)).c;if(!(b&&E&&b[0]&&E[0]))return!y.s||!e.s||b&&!b[0]&&!E||E&&!E[0]&&!b?e.c=e.e=e.s=null:(e.s*=y.s,b&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(t=p(y.e/l)+p(e.e/l),e.s*=y.s,(c=b.length)<(w=E.length)&&(v=b,b=E,E=v,i=c,c=w,w=i),i=c+w,v=[];i--;v.push(0));for(N=u,O=h,i=w;--i>=0;){for(n=0,m=E[i]%O,d=E[i]/O|0,o=i+(s=c);o>i;)n=((a=m*(a=b[--s]%O)+(f=d*a+(g=b[s]/O|0)*m)%O*O+v[o]+n)/N|0)+(f/O|0)+d*g,v[o--]=a%N;v[o]=n}return n?++t:v.splice(0,1),V(e,v,t)},D.negated=function(){var e=new $(this);return e.s=-e.s||null,e},D.plus=function(e,r){var n,t=this,i=t.s;if(r=(e=new $(e,r)).s,!i||!r)return new $(NaN);if(i!=r)return e.s=-r,t.minus(e);var o=t.e/l,s=e.e/l,f=t.c,c=e.c;if(!o||!s){if(!f||!c)return new $(i/0);if(!f[0]||!c[0])return c[0]?e:new $(f[0]?t:0*i)}if(o=p(o),s=p(s),f=f.slice(),i=o-s){for(i>0?(s=o,n=c):(i=-i,n=f),n.reverse();i--;n.push(0));n.reverse()}for((i=f.length)-(r=c.length)<0&&(n=c,c=f,f=n,r=i),i=0;r;)i=(f[--r]=f[r]+c[r]+i)/u|0,f[r]=u===f[r]?0:f[r]%u;return i&&(f=[i].concat(f),++s),V(e,f,s)},D.precision=D.sd=function(e,r){var n,t,i,o=this;if(null!=e&&e!==!!e)return d(e,1,g),null==r?r=L:d(r,0,8),W(new $(o),e,r);if(!(n=o.c))return null;if(t=(i=n.length-1)*l+1,i=n[i]){for(;i%10==0;i/=10,t--);for(i=n[0];i>=10;i/=10,t++);}return e&&o.e+1>t&&(t=o.e+1),t},D.shiftedBy=function(e){return d(e,-c,c),this.times("1e"+e)},D.squareRoot=D.sqrt=function(){var e,r,t,i,o,s=this,f=s.c,u=s.s,l=s.e,c=x+4,a=new $("0.5");if(1!==u||!f||!f[0])return new $(!u||u<0&&(!f||f[0])?NaN:f?s:1/0);if(0==(u=Math.sqrt(+X(s)))||u==1/0?(((r=w(f)).length+l)%2==0&&(r+="0"),u=Math.sqrt(+r),l=p((l+1)/2)-(l<0||l%2),t=new $(r=u==1/0?"5e"+l:(r=u.toExponential()).slice(0,r.indexOf("e")+1)+l)):t=new $(u+""),t.c[0])for((u=(l=t.e)+c)<3&&(u=0);;)if(o=t,t=a.times(o.plus(n(s,o,c,1))),w(o.c).slice(0,u)===(r=w(t.c)).slice(0,u)){if(t.e<l&&--u,"9999"!=(r=r.slice(u-3,u+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(W(t,t.e+x+2,1),e=!t.times(t).eq(s));break}if(!i&&(W(o,o.e+x+2,0),o.times(o).eq(s))){t=o;break}c+=4,u+=4,i=1}return W(t,t.e+x+1,L,e)},D.toExponential=function(e,r){return null!=e&&(d(e,0,g),e++),z(this,e,r,1)},D.toFixed=function(e,r){return null!=e&&(d(e,0,g),e=e+this.e+1),z(this,e,r)},D.toFormat=function(e,r,n){var t,i=this;if(null==n)null!=e&&r&&"object"==typeof r?(n=r,r=null):e&&"object"==typeof e?(n=e,e=r=null):n=F;else if("object"!=typeof n)throw Error(s+"Argument not an object: "+n);if(t=i.toFixed(e,r),i.c){var o,f=t.split("."),u=+n.groupSize,l=+n.secondaryGroupSize,c=n.groupSeparator||"",a=f[0],h=f[1],g=i.s<0,p=g?a.slice(1):a,w=p.length;if(l&&(o=u,u=l,l=o,w-=o),u>0&&w>0){for(o=w%u||u,a=p.substr(0,o);o<w;o+=u)a+=c+p.substr(o,u);l>0&&(a+=c+p.slice(o)),g&&(a="-"+a)}t=h?a+(n.decimalSeparator||"")+((l=+n.fractionGroupSize)?h.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):h):a}return(n.prefix||"")+t+(n.suffix||"")},D.toFraction=function(e){var r,t,i,o,f,u,c,h,g,p,m,d,v=this,N=v.c;if(null!=e&&(!(c=new $(e)).isInteger()&&(c.c||1!==c.s)||c.lt(P)))throw Error(s+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+X(c));if(!N)return new $(v);for(r=new $(P),g=t=new $(P),i=h=new $(P),d=w(N),f=r.e=d.length-v.e-1,r.c[0]=a[(u=f%l)<0?l+u:u],e=!e||c.comparedTo(r)>0?f>0?r:g:c,u=C,C=1/0,c=new $(d),h.c[0]=0;p=n(c,r,0,1),1!=(o=t.plus(p.times(i))).comparedTo(e);)t=i,i=o,g=h.plus(p.times(o=g)),h=o,r=c.minus(p.times(o=r)),c=o;return o=n(e.minus(t),i,0,1),h=h.plus(o.times(g)),t=t.plus(o.times(i)),h.s=g.s=v.s,m=n(g,i,f*=2,L).minus(v).abs().comparedTo(n(h,t,f,L).minus(v).abs())<1?[g,i]:[h,t],C=u,m},D.toNumber=function(){return+X(this)},D.toPrecision=function(e,r){return null!=e&&d(e,1,g),z(this,e,r,2)},D.toString=function(e){var r,n=this,t=n.s,i=n.e;return null===i?t?(r="Infinity",t<0&&(r="-"+r)):r="NaN":(null==e?r=i<=U||i>=I?N(w(n.c),i):O(w(n.c),i,"0"):10===e&&j?r=O(w((n=W(new $(n),x+i+1,L)).c),n.e,"0"):(d(e,2,q.length,"Base"),r=y(O(w(n.c),i,"0"),10,e,t,!0)),t<0&&n.c[0]&&(r="-"+r)),r},D.valueOf=D.toJSON=function(){return X(this)},D._isBigNumber=!0,null!=r&&$.set(r),$}()).default=n.BigNumber=n,"function"==typeof e&&e.amd?e(function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:(r||(r="undefined"!=typeof self&&self?self:window),r.BigNumber=n)}(this);
},{}],"Pxsv":[function(require,module,exports) {
module.exports={"ABI version":2,version:"2.2",header:["pubkey","time","expire"],functions:[{name:"constructor",inputs:[{name:"initialSupplyTo",type:"address"},{name:"initialSupply",type:"uint128"},{name:"deployWalletValue",type:"uint128"},{name:"mintDisabled",type:"bool"},{name:"burnByRootDisabled",type:"bool"},{name:"burnPaused",type:"bool"},{name:"remainingGasTo",type:"address"}],outputs:[]},{name:"supportsInterface",inputs:[{name:"answerId",type:"uint32"},{name:"interfaceID",type:"uint32"}],outputs:[{name:"value0",type:"bool"}]},{name:"disableMint",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"bool"}]},{name:"mintDisabled",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"bool"}]},{name:"burnTokens",inputs:[{name:"amount",type:"uint128"},{name:"walletOwner",type:"address"},{name:"remainingGasTo",type:"address"},{name:"callbackTo",type:"address"},{name:"payload",type:"cell"}],outputs:[]},{name:"disableBurnByRoot",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"bool"}]},{name:"burnByRootDisabled",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"bool"}]},{name:"burnPaused",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"bool"}]},{name:"setBurnPaused",inputs:[{name:"answerId",type:"uint32"},{name:"paused",type:"bool"}],outputs:[{name:"value0",type:"bool"}]},{name:"transferOwnership",inputs:[{name:"newOwner",type:"address"},{name:"remainingGasTo",type:"address"},{components:[{name:"value",type:"uint128"},{name:"payload",type:"cell"}],name:"callbacks",type:"map(address,tuple)"}],outputs:[]},{name:"name",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"string"}]},{name:"symbol",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"string"}]},{name:"decimals",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"uint8"}]},{name:"totalSupply",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"uint128"}]},{name:"walletCode",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"cell"}]},{name:"rootOwner",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"address"}]},{name:"walletOf",inputs:[{name:"answerId",type:"uint32"},{name:"walletOwner",type:"address"}],outputs:[{name:"value0",type:"address"}]},{name:"deployWallet",inputs:[{name:"answerId",type:"uint32"},{name:"walletOwner",type:"address"},{name:"deployWalletValue",type:"uint128"}],outputs:[{name:"tokenWallet",type:"address"}]},{name:"mint",inputs:[{name:"amount",type:"uint128"},{name:"recipient",type:"address"},{name:"deployWalletValue",type:"uint128"},{name:"remainingGasTo",type:"address"},{name:"notify",type:"bool"},{name:"payload",type:"cell"}],outputs:[]},{name:"acceptBurn",id:"0x192B51B1",inputs:[{name:"amount",type:"uint128"},{name:"walletOwner",type:"address"},{name:"remainingGasTo",type:"address"},{name:"callbackTo",type:"address"},{name:"payload",type:"cell"}],outputs:[]},{name:"sendSurplusGas",inputs:[{name:"to",type:"address"}],outputs:[]}],data:[{key:1,name:"name_",type:"string"},{key:2,name:"symbol_",type:"string"},{key:3,name:"decimals_",type:"uint8"},{key:4,name:"rootOwner_",type:"address"},{key:5,name:"walletCode_",type:"cell"},{key:6,name:"randomNonce_",type:"uint256"},{key:7,name:"deployer_",type:"address"}],events:[],fields:[{name:"_pubkey",type:"uint256"},{name:"_timestamp",type:"uint64"},{name:"_constructorFlag",type:"bool"},{name:"name_",type:"string"},{name:"symbol_",type:"string"},{name:"decimals_",type:"uint8"},{name:"rootOwner_",type:"address"},{name:"walletCode_",type:"cell"},{name:"totalSupply_",type:"uint128"},{name:"burnPaused_",type:"bool"},{name:"burnByRootDisabled_",type:"bool"},{name:"mintDisabled_",type:"bool"},{name:"randomNonce_",type:"uint256"},{name:"deployer_",type:"address"}]};
},{}],"j0Rp":[function(require,module,exports) {
module.exports={"ABI version":2,version:"2.2",header:["pubkey","time","expire"],functions:[{name:"constructor",inputs:[],outputs:[]},{name:"supportsInterface",inputs:[{name:"answerId",type:"uint32"},{name:"interfaceID",type:"uint32"}],outputs:[{name:"value0",type:"bool"}]},{name:"destroy",inputs:[{name:"remainingGasTo",type:"address"}],outputs:[]},{name:"burnByRoot",inputs:[{name:"amount",type:"uint128"},{name:"remainingGasTo",type:"address"},{name:"callbackTo",type:"address"},{name:"payload",type:"cell"}],outputs:[]},{name:"burn",inputs:[{name:"amount",type:"uint128"},{name:"remainingGasTo",type:"address"},{name:"callbackTo",type:"address"},{name:"payload",type:"cell"}],outputs:[]},{name:"balance",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"uint128"}]},{name:"owner",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"address"}]},{name:"root",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"address"}]},{name:"walletCode",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"cell"}]},{name:"transfer",inputs:[{name:"amount",type:"uint128"},{name:"recipient",type:"address"},{name:"deployWalletValue",type:"uint128"},{name:"remainingGasTo",type:"address"},{name:"notify",type:"bool"},{name:"payload",type:"cell"}],outputs:[]},{name:"transferToWallet",inputs:[{name:"amount",type:"uint128"},{name:"recipientTokenWallet",type:"address"},{name:"remainingGasTo",type:"address"},{name:"notify",type:"bool"},{name:"payload",type:"cell"}],outputs:[]},{name:"acceptTransfer",id:"0x67A0B95F",inputs:[{name:"amount",type:"uint128"},{name:"sender",type:"address"},{name:"remainingGasTo",type:"address"},{name:"notify",type:"bool"},{name:"payload",type:"cell"}],outputs:[]},{name:"acceptMint",id:"0x4384F298",inputs:[{name:"amount",type:"uint128"},{name:"remainingGasTo",type:"address"},{name:"notify",type:"bool"},{name:"payload",type:"cell"}],outputs:[]},{name:"sendSurplusGas",inputs:[{name:"to",type:"address"}],outputs:[]}],data:[{key:1,name:"root_",type:"address"},{key:2,name:"owner_",type:"address"}],events:[],fields:[{name:"_pubkey",type:"uint256"},{name:"_timestamp",type:"uint64"},{name:"_constructorFlag",type:"bool"},{name:"root_",type:"address"},{name:"owner_",type:"address"},{name:"balance_",type:"uint128"}]};
},{}],"YBsG":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ftTokenWalletABI=exports.ftTokenRootABI=void 0;var e=t(require("broxus-ton-tokens-contracts/build/TokenRoot.abi.json"));exports.ftTokenRootABI=e.default;var o=t(require("broxus-ton-tokens-contracts/build/TokenWallet.abi.json"));exports.ftTokenWalletABI=o.default;
},{"broxus-ton-tokens-contracts/build/TokenRoot.abi.json":"Pxsv","broxus-ton-tokens-contracts/build/TokenWallet.abi.json":"j0Rp"}],"KmwN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.data=void 0,exports.data={filter:{symbol:"BRIDGE",balance:100},list:["0:e0acbc21f0a538a1cca6b1434d454697527a5678479976fdf48af2ba12360c4f","0:ade6e32df9e59c476e14f6ecc1f4cdc4fb1b6aaf165893f54b5d3a73695a0081","0:a80bc3541b81aa1016a23dcd1d9ea4683378e7a006be6278efa1ad147ec54a1b","0:8c0728cd29321d3e00552032af88365899d3e900169d0a87ff8180b15d4ccdac","0:54bc150b06228a286e478fe6e37156a4dab187fde28438cce88faebe6777837a","0:6b6f2f7a233d549bf659141fd68f4caa44d53b19855d61f7a6e1e52854e78e37","0:6756d652a9a1d6d36091a9f2941506eaaddd6a89852e9cb1300c75f5bdb58b29","0:a62af626f1fa7803b888a863b423d5854bef7f25813cf5a619cfa158ee3c1a2c","0:3a94fecf77990496bb997fad96c60c136d415f40f300bc7ae25738c186f28ee4","0:87ee2b13cf11d251615e9b843df03a00cbe42a81fafe241adcaf454a42b226f1","0:e58240c9c68af9fc9cd213b92e0c8fa23047223b7eba0a0918fa6ec085a2eb8d","0:f283fc22a35dff1156b16c2800fd19f564a13111ee7dfff8d7a21744cff93dcb","0:cbd090198d22e4b1a77227ba2bff58a05a32049ef2908aebfb461cacd6a474c8","0:63c7246fa23c1f076602a8499ffb1d57a64fe35ca227c21b66f05ecbe3a2b553","0:52b7d5ba0c1ae5baaa57dd6c12ecd65f5621b9471c44431d69467fa9cbc82558","0:9b06ceafb020a8f164207b6cc88bdc2d9e9ef508ed7faba8af73ecf3f50186db","0:9b6765ac14d17564cb8958d8a268d6ac24326470679d9456749f658ea532a9cf","0:c1ea871cc4ecba8ca81c6773a1343bb86930804216e58db9416800de4d38da47","0:0c3fbf8b400ce637a49e09e7ae2fc5e92920680b1d10f4cd6956c7aebde93903","0:e9fd9b03ae67de6c071510bce975bc5a0b6c5451546e6b941723df5787f95877","0:2a6d65bce6477a03f7c5e0c9372011b778aef329313bc110ebbc4e5cb69ae268","0:f1d890e000b0ebe25657938e393055be2734ecae09a63d0fb1ef241efac0c2e4","0:55632d42819d2f98cdc7666132510b7f03ff334a7e5d2aededc80d3f399ba5ac","0:c91ae4e7d395f41d156e520d0b86a449a2cd8a65f0391bfc84f347f55dcfc97b","0:304e6b9165d1ab2eaeec6b652862785c420e87dbeb4b78c220e51219a8088058","0:ec514132b56baafc7251c911e7f02239542a93b92b2c3238d613daae8244877b","0:4f4f10cb9a30582792fb3c1e364de5a6fbe6fe04f4167f1f12f83468c767aeb3","0:3e5b82956baa47562751f412d96b240a98c996fb111300b2e07867ff793a3560","0:1682957988e45a3d9dc796b55e9949f0e49620fcf9b77e3097d27024ede02245","0:ec904c672a12bc495c8007442bf7ebe2ac2ee50fc105e48422e913ee34e9d1cf","0:53cf69843e95266c3723249056cf2aacda9e13fec2d0c506698143ca2a0633c0","0:22974c8dcadf6422e4f8f79d6272cd33eb1ac03c0dbc9db02ac8e1cc9452a076","0:41dc520061a68ba82de79c4748c3bfdb93bb7443203394890dad19905dbec8fd","0:2ddd340c4ecfd874bd2823603a907caec797deb716a26e240ad8b1766f19555d","0:b86978a414dd5d48f276cb23d2bfdb0c95675980c9d7ff482e8c7d880d955fed","0:cd9be956647443f10a80e4b9f17c640c6d2d0052368f2f78d2307bb1598643d0","0:aa649408e0593374839de3ef2753fbafe1d567cc4d463cd26e8de9fcd2a7d40d","0:4e9c2ca3ea7ed936c2a0d222fb99851026858cdc63225270d0082a9f969fa3d6","0:5733bff80de7ec6a2715ad6a1bcd478dd15060e2c8fead199581c69fbdbb13b5","0:ce0a4568d955c86f9bd222ecb7649c657ba285bdea7f5ad294b955c3682c624d","0:08b374020021936f394d67b4cde921c534b3ba3aa79b37febdfa251bf2e9c355","0:420049845c054c9e5f14f582d7b66d6007f5462b30470eb947f2d5f8c1237dae","0:5638e128870a7c7b6e6545b11a088b5f7fa02d2759d1b5ab340f6e7fc794907a","0:8f7a8b4b9b6ad7503138cb9532999da79dc9d4ead49b15563705b69d5457feef","0:5c9df8977eb04df2603223515f4dff03bcbff8c0c5357a7a276d54e1291ee74d","0:ee36b39b5845af356247e7051cd28ca30cedbf164355a2f0918c79eb7db7d06b","0:cdf498d1d67acba43493343390929806a7a2b89e5c48504621bd3ad11607be3a","0:743aa42f372b5b5eaf59aa3ddb2cf563adecc964141b6d2a1525f50931f7335a","0:d02789290053b5f19aa8fe2c7c64e21a7408d022cdeed08f96246a60f21995c0","0:149ce19e138ddb8f08f4658b7e6f0eb63e8c0c781f9f390f5d786bf5fdffb879","0:9479aed6d0a45a738b0d476ee3d2188fec34b7ca657c4fb837925fd7198fef56","0:b3884db7b51f6f391f2966ba2db57f1a62014ca0340eb454a76a2b192fc7553c","0:1b84e61c7f15986595438b3f8fab36c2f6e7af10c1ebb3f3831c93d9e858e57e","0:9e80ba4a757aeba0a86e749ae6ac54b0eb8606175ecb116ba4dd83388c06cc9a","0:3caf0ca896cc51c24a56b0fa85c40e39245b6217699d634796486f21411e25c8","0:a8ba0e23aa4f112ecce4e8aa43fa95b259289c1b5ed516ffe331de7558a357d5","0:a644ac5df4fadb5ea19e12b4f96be51f61c6dd9da631cae951a202ccbef87c30","0:e840c1f07d4ae6270b1c4ae63ff340eecf2c2c1548073edb7d32a3a709103e7a","0:22c7731aa7b26e85ea3a49127dd613df0d70121243dcaa50f50eb6254a20b318","0:9fb0eda25c2b3ec277c6be49023ce9f31dcdfecb02494ab51faf0658cbd283e5","0:f8807c34c44295cb38f27205881a7f08c1d482cfa2ed584236c980dfe4206498","0:676effd8fee0393eab5844996929972d897b967de9beb9ee7bf6b769cca63e80","0:c32718358bdb292880a7f127e3648d0796e734661c00fcbf6e5cb6814a650d47","0:fac3c86582ef5122c45138773c2403b719bd2c142b9439982b066e7d4ccf01c1","0:d0ee75e8ac94d735a9bb553b68b7ccb141237646bf9529098663443724f54f19"]};
},{}],"H6gL":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(n){a(n)}}function c(e){try{s(r.throw(e))}catch(n){a(n)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(i,c)}s((r=r.apply(e,n||[])).next())})},n=this&&this.__generator||function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(c){a=[6,c],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("everscale-inpage-provider"),r=require("everscale-standalone-client"),o=require("bignumber.js"),a=require("./abi"),i=require("./data"),c=new t.ProviderRpcClient({fallback:function(){return r.EverscaleStandaloneClient.create({connection:"mainnet"})}});function s(r,i){return e(this,void 0,void 0,function(){var e,s,u,f,d,h,b;return n(this,function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),[4,l(r)];case 1:return e=n.sent(),s=new c.Contract(a.ftTokenRootABI,e.rootV5),f=parseInt,[4,s.methods.decimals({answerId:0}).call()];case 2:return u=f.apply(void 0,[n.sent().value0]),[4,s.methods.walletOf({walletOwner:new t.Address(i),answerId:0}).call()];case 3:return d=n.sent().value0,h=new c.Contract(a.ftTokenWalletABI,d),b=o.BigNumber.bind,[4,h.methods.balance({answerId:0}).call()];case 4:return[2,(new(b.apply(o.BigNumber,[void 0,n.sent().value0]))).div(new o.BigNumber(10).pow(u)).toNumber()];case 5:return n.sent(),[2,0];case 6:return[2]}})})}function l(t){return e(this,void 0,void 0,function(){var e,r,o,a;return n(this,function(n){switch(n.label){case 0:return[4,u("https://raw.githubusercontent.com/broxus/everscale-assets-upgrade/master/main.json")];case 1:for(e=n.sent(),r=0,o=e;r<o.length;r++)if((a=o[r]).symbol===t)return[2,a];throw new Error("Not exist ".concat(t))}})})}function u(r){return e(this,void 0,Promise,function(){return n(this,function(e){return[2,fetch(r).then(function(e){return e.json()}).then(function(e){return e.tokens.map(function(e){return{symbol:e.symbol,logoURI:e.logoURI,proxy:new t.Address(e.proxy),rootV4:new t.Address(e.rootV4),rootV5:new t.Address(e.rootV5)}})})]})})}function f(e,n){return Math.floor(Math.random()*(n-e+1)+e)}function d(e,n){document.querySelectorAll("[data-behavior=".concat(e,"]")).forEach(n)}var h=function(e){return function(n){n.innerText=e}};function b(e){["extension","main"].forEach(function(n){d(n,function(t){return t.style.display=e===n?"block":"none"})})}function p(){return e(this,void 0,void 0,function(){var e,t,r,o,a,l,u,p,v,w;return n(this,function(n){switch(n.label){case 0:return b("extension"),[4,c.ensureInitialized()];case 1:return n.sent(),[4,c.requestPermissions({permissions:["basic"]})];case 2:n.sent(),b("main"),e=i.data.list,t=[],d("out",h("Check balance ".concat(i.data.filter.symbol))),r="",o=0,a=e,n.label=3;case 3:return o<a.length?(l=a[o],[4,s(i.data.filter.symbol,l)]):[3,6];case 4:u=n.sent(),t.push({address:l,balance:u}),r="".concat(l," ").concat(i.data.filter.symbol,":").concat(u,"\n")+r,d("log",h(r)),n.label=5;case 5:return o++,[3,3];case 6:return p=function(e){return e.balance>=i.data.filter.balance},v=t.filter(p),console.log(t.length,v.length),console.log(v),w=v[f(0,v.length)],d("out",h("Random address with balance ".concat(i.data.filter.symbol," greater than and equal ").concat(i.data.filter.balance," is ").concat(w.address))),[2]}})})}p().catch(console.error);
},{"everscale-inpage-provider":"RebX","everscale-standalone-client":"oFYt","bignumber.js":"vrSf","./abi":"YBsG","./data":"KmwN"}]},{},["H6gL"], null)